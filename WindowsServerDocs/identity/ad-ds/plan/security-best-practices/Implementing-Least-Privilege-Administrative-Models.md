---
ms.assetid: 7a7ab95c-9cb3-4a7b-985a-3fc08334cf4f
title: "实现最低权限管理模型"
description: 
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adds
ms.openlocfilehash: 9716d442446b2705dfd2803d061cb884a5e72fbe
ms.sourcegitcommit: db290fa07e9d50686667bfba3969e20377548504
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/12/2017
---
# <a name="implementing-least-privilege-administrative-models"></a>实现最低权限管理模型

>适用于：Windows Server 2016，Windows Server 2012 R2、Windows Server 2012

下面的摘要是从[管理员帐户安全规划指南](https://technet.microsoft.com/library/cc162797.aspx)，在 1999 年 4 月 1 日第一次发布：  
  
> "最安全相关培训课程和文档讨论最低权限，原则实现尚未组织很少按照。 原则非常简单，并且膜正确极大的影响增加安全性，并减少你的风险。 原则指出所有用户应都登录具有绝对必要完成当前的任务，但没有任何更多的最小权限的用户帐户。 的操作可提供抵御恶意的代码，其他攻击。 此原则适用于计算机和的计算机用户。   
> "一个此原则如此有效的原因是它强制你执行某些内部调查。 例如，你必须确定计算机或用户真正需要的访问权限，并对其进行实现。 对于许多组织，此任务中可能最初看起来像了大量工作;但是，它是基本步骤来成功安全网络环境。   
> "你应授予所有域管理员用户域特权最低权限的概念。 例如，如果 administrator 身份登录时使用权限的帐户，并且无意中运行病毒程序，病毒有管理访问本地计算机和到整个的域。 如果管理员必须改为使用登录的权限（非管理员）的帐户，因为它的用户身份本地计算机运行损坏的病毒的范围内可能会在本地计算机。   
> "在另一个示例中，授予域级别管理员权限的帐户必须不具有提升另一个林中权利即使没有信任关系林之间。 此策略有助于防止广泛损坏，即使攻击危害一个托管的森林。 组织应定期审核其网络，以防止未经授权的权限提升。"  
  
下面的摘要是从[Microsoft Windows 安全资源工具包](https://www.microsoft.com/learning/en/us/book.aspx?ID=6815&locale=en-us)、中的已发布的第一个 2005 年:  
  
> "始终安全在授予最少的权限，需要执行的任务的想法。 如果应威胁的应用程序有过多的权限，攻击者可能能够展开超出应用已在最小的位置权限可能逗号攻击。 例如，检查网络管理员无意间打开启动病毒的电子邮件附件的后果。 如果管理员身份登录使用管理员帐户的域，病毒将具有管理员权限在域中的所有计算机上，因此无限制到网络上的几乎所有数据的访问。 管理员在登录时使用的本地管理员帐户，病毒将具有管理员权限在本地计算机上，因此，将无法访问计算机上的任何数据并安装在计算机上的键笔划日志记录软件等的恶意软件。 如果管理员身份登录使用普通用户帐户，病毒将有权访问仅管理员数据，并将无法安装恶意软件。 通过使用需阅读电子邮件，在此示例中的最权限潜在危害的范围大大减少。"  
  
## <a name="the-privilege-problem"></a>特权问题  
原则，述上述摘录未进行更改，但在评估 Active Directory 安装，我们总是查找过多的帐户已被授予权限远这些执行日常工作所必需的。 环境大小会影响过于特权帐户的原始数字，但不是 proportionmidsized 目录中可能包含的帐户多种最高权限的组中，而大型安装可能有成百上千甚至。 有几例外，无论完善的攻击技能和集中，攻击者通常遵循至少阻力的路径。 它们的工具和方法复杂性仅当和时增加人实在更易于使用机制出现故障或被阻止。  
  
遗憾的是，在许多环境至少阻力路径已被证明滥用具有大量和深度权限的帐户。 广泛特权是允许在较大里不同组环境-例如执行特定的活动某一帐户的权限，帮助支持人员可以授予权限，使它们在多个用户帐户的密码重置。  
  
深度权限强大应用于人口窄段的权限，因此此类让工程师管理员权限在服务器上，以便他们可以执行维修。 广泛特权也深度特权不一定危险，但当在域中的许多帐户永久授予时广泛和深度特权如果只有一个帐户已受到威胁，它可以快速用于重新配置攻击者目的到环境或甚至销毁大段基础结构。  
  
Pass 哈希攻击，这是一种类型的凭据盗窃攻击，是普遍，这是因为执行这些工具自由可用和轻松使用和由于许多环境易受攻击。 但是，pass 哈希攻击不是真正的问题。 关键问题的是双重：  
  
1.  很攻击者可获得了深度特权一台计算机上的，然后传播到其他计算机广泛该特权通常容易。  
  
2.  跨计算横向通常有具有高级别权限的太多永久帐户。  
  
即使消除 pass 哈希攻击，攻击者会只需使用不同的策略，不不同的策略。 而不是植入包含凭据被盗工具的恶意软件，也可能植物日志按键的恶意软件或充分利用任意数量的其他方法捕获整个环境功能强大的凭据。 无论是否为策略，目标保持不变：广泛和深度权限的帐户。  
  
授予过度特权未仅在中找到 Active Directory 受到威胁的环境中。 组织的授予比需要更多特权习惯开发，是通常发现整个以下部分中所述的基础结构。  
  
## <a name="in-active-directory"></a>Active Directory 中  
Active Directory，在很常见查找 EA、DA 和栏组包含过多的帐户。 大多数情况下，组织 EA 组包含少成员 DA 组通常包含一个倍数的 EA 组中，用户的数量，管理员组通常包含更多比组结合使用大量的成员。 这通常是管理员某种程度上是以下情况由于"不太比 DAs 或 EAs 的权限"。 尽管不同的权利和每个组授予权限，它们应有效地考虑同样强大的多个组因为之一成员可以进行自我另外两个的成员。  
  
## <a name="on-member-servers"></a>成员服务器上  
当我们检索许多环境中的成员服务器上的本地管理员组中的成员时，我们发现介于本地和域帐户，一些到很多嵌套组成员资格，展开时，揭示数百，甚至成千上万的本地管理员权限在服务器上的帐户。 在许多情况下，在成员服务器的本地管理员组中，而不到任何用户都可以修改的域中的这些组成员可以获得的所有系统在其上有已组嵌套本地管理员组中的管理控制的事实在内嵌套域组具有较大的会员身份。  
  
## <a name="on-workstations"></a>工作站上  
尽管工作站通常在其本地管理员组减少明显成员少于成员服务器，在很多环境中，用户授予他们的个人计算机上本地中的成员。 当发生这种情况，即使 UAC 处于启用状态时，这些用户出示其工作站完整性提升了权限的风险。  
  
> [!IMPORTANT]  
> 您应该仔细考虑是否用户需要管理权限他们的工作站上，如果他们这样做，更好的方法可能是管理员组成员的计算机上创建一个单独的本地帐户。 当用户需要提升时，他们可以提供提升，该本地帐户凭据，但本地帐户，因为它不能用于危及其他计算机或访问域资源。 与任何本地帐户，但特权本地帐户凭据应该是唯一;如果你使用多个工作站上的同一凭据创建本地帐户，你公开 pass 哈希攻击到计算机。  
  
## <a name="in-applications"></a>在应用程序  
在目标处于组织知识财产攻击，可以目标已被授予功能强大的权限，应用程序内的帐户以允许 exfiltration 的数据。 尽管有权访问敏感数据的帐户可能已被授予域或操作系统中没有提升了权限的权限，可操作的应用或对应用程序的信息的访问权限的配置的帐户将提供存在风险。  
  
## <a name="in-data-repositories"></a>中的数据存储库维护  
与的其他目标情况一样，查找以下形式出现：文档和其他文件在知识财产访问可以攻击者可帐户，控制访问文件存储，可以直接访问文件，甚至组或有权访问文件的角色的帐户。 例如，如果文件服务器，用于存储合同文档和被授予访问权限文档通过使用 Active Directory 组，攻击者可修改的组成员可以受到威胁的帐户添加到组和访问合同文档。 访问文档由 SharePoint 等应用程序的情况下，如上文所述，攻击者可目标提供的应用程序。  
  
## <a name="reducing-privilege"></a>减少权限  
较大和多个复杂环境中，更难很管理和安全。 小型企业中, 查看和减少特权可能是一种相对简单的做法，但每个额外的服务器、工作站、用户帐户和组织中使用的应用程序添加了另一个必须安全的对象。 由于将很难或甚至不可能给正确安全每个方面的组织的 IT 基础结构，你应该以此为重点其特权创建最大的风险的帐户上的第一次努力，这通常是特权内置帐户中的 Active Directory 中，分组和特权的本地帐户工作站和成员服务器上。  
  
### <a name="securing-local-administrator-accounts-on-workstations-and-member-servers"></a>保护工作站和成员服务器上的本地管理员帐户  
尽管本文重点介绍保护 Active Directory，因为以前讨论，大多数攻击目录开始作为针对个别主机的攻击。 不能提供保护本地组成员系统上的完整准则，但下列建议可用于帮助你保护工作站和成员服务器上的本地管理员帐户。  
  
#### <a name="securing-local-administrator-accounts"></a>固定的本地管理员帐户  
所有 Windows 版本的当前是在主要支持，默认情况下，这可以使该帐户 pass 哈希和其他凭据盗窃攻击不可用的本地管理员帐户处于禁用都状态。 但是，包含旧操作系统的域中，或在已启用的本地管理员帐户，这些帐户可用如上文所述跨成员服务器和工作站传播泄露。 出于此原因，在已加入域的系统上所有的本地管理员帐户推荐下的控件。  
  
详细说明如何实现这些控件中提供了[附录 h：保护措施的本地管理员帐户和组](../../../ad-ds/plan/security-best-practices/Appendix-H--Securing-Local-Administrator-Accounts-and-Groups.md)。 在实现这些设置之前但是，确保的本地管理员帐户当前未使用环境中运行的计算机上的服务或执行其他活动为其不应使用这些帐户。 产品环境中实现它们之前全面测试这些设置。  
  
#### <a name="controls-for-local-administrator-accounts"></a>控件的本地管理员帐户  
内置管理员帐户从不应用作服务成员服务器上的帐户，也不应使用它们登录到本地计算机上（在安全模式下，即使该帐户已禁用允许除外）。 实现设置此处所述的目的是为了防止每台计算机的本地管理员帐户被可用，除非首先反转保护控件。 通过实现这些控件和监控管理员帐户更改，你可以显著减少成功攻击的可能性该目标的本地管理员帐户。  
  
##### <a name="configuring-gpos-to-restrict-administrator-accounts-on-domain-joined-systems"></a>配置 Gpo 限制上已加入域的系统管理员帐户  
在你创建并链接到工作站和成员服务器华丽绚烂每个域中的一个或多个 Gpo 的管理员帐户添加到在以下的用户权限**计算机配置 \ 策略 \windows \ 设置本地 Settings\User 权限分配**:  
  
-   拒绝该计算机的访问从网络  
  
-   作为批量作业拒绝登录  
  
-   作为一项服务拒绝登录  
  
-   远程桌面服务通过拒绝登录  
  
当你添加到这些用户权限的管理员帐户时，可指定是否要添加的本地管理员帐户或的域的管理员帐户顺便说一句标记帐户。 例如，若要添加到这些 NWTRADERS 域的管理员帐户拒绝权限，会键入的帐户作为**NWTRADERS\Administrator**，或浏览到 NWTRADERS 域的管理员帐户。 若要确保你限制的本地管理员帐户，请键入**管理员**用户在这些权限组策略对象编辑器中的设置。  
  
> [!NOTE]  
> 即使本地管理员帐户有重命名，策略仍然适用。  
  
这些设置将确保该计算机管理员帐户不能用于连接到其他计算机，即使它已意外或恶意启用。 不能完全禁用本地登录时使用的本地管理员帐户，也不应你尝试执行此操作，因为旨在在恢复方案中灾难使用计算机的本地管理员帐户。  
  
应成员服务器或工作站成为脱离域与任何其他本地帐户管理授予权限计算机可启动到安全模式、可以启用管理员帐户，，然后使用该帐户影响的计算机上的维修。 完成维修后，应再次禁用的管理员帐户。  
  
### <a name="securing-local-privileged-accounts-and-groups-in-active-directory"></a>保护特权的本地帐户以及 Active Directory 中的组  
*法律编号六：一台计算机是否安全管理员值得。* - [十变法律规定，，安全 （2.0 版本）](https://technet.microsoft.com/security/hh278941.aspx)  
  
下面提供的信息用于保护最高权限内置帐户和多个组中的 Active Directory 提供一般指南。 中提供了详细的分步说明[附录 d：保护内置管理员帐户中的 Active Directory](../../../ad-ds/plan/security-best-practices/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory.md)，[附录 e：保护企业管理员中的组 Active Directory](../../../ad-ds/plan/security-best-practices/Appendix-E--Securing-Enterprise-Admins-Groups-in-Active-Directory.md)，[附录 f：保护域管理员中的组 Active Directory](../../../ad-ds/plan/security-best-practices/Appendix-F--Securing-Domain-Admins-Groups-in-Active-Directory.md)，并在[附录 g：保护管理员中的组 Active Directory](../../../ad-ds/plan/security-best-practices/Appendix-G--Securing-Administrators-Groups-in-Active-Directory.md)。  
  
在实现这些设置的任何之前，你还应该测试完全擦除，以确定是否适用于您的环境的所有设置。 并非所有组织将都能够在实现这些设置。  
  
#### <a name="securing-built-in-administrator-accounts-in-active-directory"></a>保护 Active Directory 中内置管理员帐户  
在每个 Active Directory 在域中，管理员帐户创建的域的创建过程。 此帐户是默认的域管理员和管理员的域中的组成员并森林根域域，则该帐户是否还企业管理员组成员。 仅对于初始版本活动和灾难恢复方案，可能是，应该保留使用的域的本地管理员帐户。 为了确保内置的管理员帐户可用于在可以使用其他帐户不会影响修复，不应更改默认会员的树林中的任何域中的管理员帐户。 相反，你应遵循指南，来帮助保护森林中的每个域中的管理员帐户。 详细说明如何实现这些控件中提供了[附录 d：保护内置管理员帐户中的 Active Directory](../../../ad-ds/plan/security-best-practices/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory.md)。  
  
#### <a name="controls-for-built-in-administrator-accounts"></a>内置管理员帐户的控件  
实现设置此处所述的目的是阻止每个域管理员帐户（不是一组）无法可供使用，除非反转的大量控件。 通过实现这些控件和监控更改的管理员帐户，您可以显著减少成功攻击的可能性，利用域的管理员帐户。 每个域你森林中的管理员帐户，你应该配置以下设置。  
  
##### <a name="enable-the-account-is-sensitive-and-cannot-be-delegated-flag-on-the-account"></a>启用该帐户上的"帐户已敏感，且不委派"标志  
默认情况下，可以被委派 Active Directory 中的所有帐户。 委派允许计算机或服务提供的帐户已向计算机身份验证的凭据或服务到其他计算机，以获取代表帐户的服务。 当您启用**敏感帐户，不能委派**特性基于域帐户上的帐户凭据无法提供给其他计算机或服务上的网络，限制充分利用委派使用该帐户凭据其他系统上的攻击。  
  
##### <a name="enable-the-smart-card-is-required-for-interactive-logon-flag-on-the-account"></a>启用"智能卡登录必须，交互式"标记的帐户  
当您启用**智能卡，才能进行交互登录**特性的帐户，Windows 将该帐户的密码重置为 120 字符随机值。 通过内置的管理员帐户设置此标记，您将确保帐户的密码不只是长复杂的但不是到任何用户知道。 不从技术上讲需要启用此特性之前, 创建的帐户的智能卡，但如果可能，应为每个配置的帐户的限制之前的管理员帐户创建智能卡和智能卡应该存储在安全位置。  
  
尽管设置**智能卡，才能进行交互登录**标志将该帐户的密码重置，它不会阻止使用重置帐户的密码，从到已知值设置帐户和在网络上使用的帐户名称和新密码访问资源的权限的用户。 出于此原因，你应实现以下帐户上的其他控件。  
  
##### <a name="disable-the-account"></a>禁用该帐户  
如果未已禁用的管理员帐户，将其禁用当你已经完成配置的帐户属性。 这可以防止帐户首次启用除非用于任何目的。 在没有帐户中可供维修广告 DS 环境灾难恢复方案中，可以域控制器启动到安全模式、本地登录使用内置的管理员帐户（这不会阻挡从本地登录），并启用的域的管理员帐户，如有必要。  
  
##### <a name="configuring-gpos-to-restrict-domains-administrator-accounts-on-domain-joined-systems"></a>配置 Gpo 限制加入域的系统上的域的管理员帐户  
尽管禁用某个域中的管理员帐户可以使该帐户有效地不可用，你应其他限制实现帐户上的帐户被意外或恶意启用的情况下。 通过管理员帐户，最终可以撤消这些控件，尽管的目标是创建 slow 攻击者的进度的控件和可以造成损坏帐户的限制。  
  
在你创建并链接到工作站和成员服务器华丽绚烂每个域中的一个或多个 Gpo，每个域管理员帐户添加到在以下的用户权限**计算机配置 \ 策略 \windows \ 设置本地 Settings\User 权限分配**:  
  
-   拒绝该计算机的访问从网络  
  
-   作为批量作业拒绝登录  
  
-   作为一项服务拒绝登录  
  
-   远程桌面服务通过拒绝登录  
  
> [!NOTE]  
> 当你添加到此设置的本地管理员帐户时，你必须指定配置本地管理员帐户或域管理员帐户。 例如，添加 NWTRADERS 域的本地管理员帐户，这些拒绝权限，您必须键入作为帐户**NWTRADERS\Administrator**，或浏览到 NWTRADERS 域的本地管理员帐户。 如果你键入**管理员**在组策略对象编辑器这些用户版权设置中，您将限制的应用 GPO 每台计算机上本地管理员帐户。  
>   
> 我们建议域基于管理员帐户的方式相同限制成员服务器和工作站上的本地管理员帐户。 因此，你应通常添加森林中的每个域的管理员帐户和本地计算机管理员帐户对这些用户版权设置。 下面的屏幕截图显示配置这些用户权限本地管理员帐户并执行不需要用于这些帐户的登录的域的管理员帐户阻止它的一个示例。  

>   
> ![最特权管理员模式](media/Implementing-Least-Privilege-Administrative-Models/SAD_20.gif)  
  
##### <a name="configuring-gpos-to-restrict-administrator-accounts-on-domain-controllers"></a>配置 Gpo 限制域控制器上的管理员帐户  
森林中的每个域，默认域控制器策略或策略链接到域控制器应修改以将每个域管理员帐户添加到在以下的用户权限**计算机配置 \ 策略 \windows \ 设置本地 Settings\User 权限分配**:  
  
-   拒绝该计算机的访问从网络  
  
-   作为批量作业拒绝登录  
  
-   作为一项服务拒绝登录  
  
-   远程桌面服务通过拒绝登录  
  
> [!NOTE]  
> 这些设置将确保的本地管理员帐户不能用于连接到域控制器，尽管帐户，如果启用，可以在本地登录到域控制器。 由于此帐户应仅启用并且用于灾难恢复方案中，预计将提供，物理访问至少一个域控制器或，可以使用其他帐户具有权限才能远程访问域控制器。  
  
##### <a name="configure-auditing-of-built-in-administrator-accounts"></a>配置审核的内置管理员帐户  
有安全的每个域管理员帐户并将其禁用时，应该配置审核监控对帐户的更改。 如果启用该帐户、将重置它的密码，或任何其他修改对该帐户，应向用户或团队负责 AD ds，除了事件响应团队在你的组织管理发送警报。  
  
### <a name="securing-administrators-domain-admins-and-enterprise-admins-groups"></a>固定的管理员，域管理员企业管理员组  
  
#### <a name="securing-enterprise-admin-groups"></a>固定企业管理员组  
企业管理员组中，存放在森林根域，应包含日常，但的域的本地管理员帐户，可能不没有用户提供如上文所述，它安全和[附录 d：保护内置管理员帐户中的 Active Directory](../../../ad-ds/plan/security-best-practices/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory.md)。  
  
EA 访问需要时，其帐户要求 EA 权限的用户应临时放入企业管理员该组。 尽管用户在使用的高权限的帐户，但应审核他们的活动，并最好是通过执行所做的更改的第一的用户和其他用户观察所做的更改，以最小化无意不恰当使用或错误配置的可能性来执行。 当已完成的活动时，应 EA 组的已删除的帐户。 这可以实现通过手动过程，并记录进程、第三方特权的身份访问管理 (PIM/PAM) 软件或两者的组合。 指南有关创建帐户，可以使用控制特权 Active Directory 中的组成员界面还设有[吸引力帐户凭据盗用](../../../ad-ds/plan/security-best-practices/Attractive-Accounts-for-Credential-Theft.md)中提供了详细的说明和[附录 i：创建管理的帐户中的 Active Directory 的受保护的帐户和组](../../../ad-ds/manage/component-updates/Appendix-I--Creating-Management-Accounts-for-Protected-Accounts-and-Groups-in-Active-Directory.md)。  
  
默认情况下的树林中的每个域中内置的管理员组成员都企业管理员。 从管理员组每个域中删除企业管理员组是不适宜的修改，因为森林灾难恢复方案中，如果 EA 权限可能会要求。 如果企业管理员组均已从管理员森林中的组，它应该会添加到每个域中的管理员组，并且应实现以下其他控件：  
  
-   如上文所述的那样，企业管理员组应包含日常，但森林根域管理员帐户，述应安全的可能不没有用户[附录 d：保护内置管理员帐户中的 Active Directory](../../../ad-ds/plan/security-best-practices/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory.md)。  
  
-   已链接到华丽绚烂包含成员服务器和每个域中的工作站 Gpo，EA 组应在添加以下的用户权限：  
  
    -   拒绝该计算机的访问从网络  
  
    -   作为批量作业拒绝登录  
  
    -   作为一项服务拒绝登录  
  
    -   本地拒绝登录  
  
    -   远程桌面服务通过拒绝登录。  
  
这将阻止 EA 组成员成员服务器和工作站登录。 如果跳转服务器用于管理域控制器和 Active Directory，确保跳转服务器位于的 OU 严格 Gpo 未的链接。  
  
-   应配置审核发送通知，如果属性或 EA 组的会员进行任何更改。 这些警告音应发送，至少，对用户或团队负责 Active Directory 管理和事件响应。 你还应该定义进程和暂时填充 EA 组中，执行合法人口组的时包括通知程序的过程。  
  
#### <a name="securing-domain-admins-groups"></a>固定的域管理员组  
一样与企业管理员组这种情况，应仅在版本或灾难恢复方案中所需域管理员组中的成员。 应该会有任何日常用户帐户除外域的本地管理员帐户 DA 组如果安全中所述[附录 d：保护内置管理员帐户中的 Active Directory](../../../ad-ds/plan/security-best-practices/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory.md)。  
  
需要 DA 访问权限时，需访问该级别的帐户应临时放的问题的域 DA 组中。 尽管用户在使用的高权限的帐户，但应审核活动，并最好是通过执行所做的更改的第一的用户和其他用户观察所做的更改，以最小化无意不恰当使用或错误配置的可能性来执行。 当已完成的活动时，应从域管理员组中删除的帐户。 这可以实现通过手动过程，并记录进程，通过第三方特权的身份访问管理 (PIM/PAM) 软件或两者的组合。 指南有关创建帐户，可以使用控制特权 Active Directory 中的组成员界面还设有[附录 i：创建管理的帐户中的 Active Directory 的受保护的帐户和组](../../../ad-ds/manage/component-updates/../../../ad-ds/manage/component-updates/Appendix-I--Creating-Management-Accounts-for-Protected-Accounts-and-Groups-in-Active-Directory.md)。  
  
默认情况下的所有成员服务器和各自域中的工作站上的本地管理员组成员是管理员域。 此默认嵌套不应进行修改，因为它会影响性和灾难的恢复选项。 如果已删除域管理员组成员服务器上的本地管理员组中，它们应添加到每个成员服务器和通过受限的组设置链接 Gpo 在域中的工作站上的管理员组中。 以下深度中所述的常规控件[附录 f：保护域管理员中的组 Active Directory](../../../ad-ds/plan/security-best-practices/Appendix-F--Securing-Domain-Admins-Groups-in-Active-Directory.md)应实现。  
  
森林中的每个域管理员组：  
  
1.  提供保护中所述，从 DA 组中，通过内置的管理员帐户域，可能异常删除的所有成员[附录 d：保护内置管理员帐户中的 Active Directory](../../../ad-ds/plan/security-best-practices/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory.md)。  
  
2.  已链接到华丽绚烂包含成员服务器和每个域中的工作站 Gpo，DA 组应在添加以下的用户权限：  
  
    -   拒绝该计算机的访问从网络  
  
    -   作为批量作业拒绝登录  
  
    -   作为一项服务拒绝登录  
  
    -   本地拒绝登录  
  
    -   远程桌面服务通过拒绝登录  
  
    这将阻止 DA 组成员成员服务器和工作站登录。 如果跳转服务器用于管理域控制器和 Active Directory，确保跳转服务器位于的 OU 严格 Gpo 未的链接。  
  
3.  应配置审核发送通知，如果属性或 DA 组的会员进行任何更改。 这些警告音应发送，至少，对用户或团队负责广告 DS 管理和事件响应。 你还应该定义进程和暂时填充 DA 组中，执行合法人口组的时包括通知程序的过程。  
  
#### <a name="securing-administrators-groups-in-active-directory"></a>Active Directory 中的固定管理员组  
EA 和 DA 组的情况一样，应仅在版本或灾难恢复方案中所需管理员（栏）组中的成员。 应该会有任何日常用户帐户管理员组除外域的本地管理员帐户如果安全中所述[附录 d：保护内置管理员帐户中的 Active Directory](../../../ad-ds/plan/security-best-practices/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory.md)。  
  
需要管理员的访问权限时，应该管理员组问题域中暂时放置需访问该级别的帐户。 用户在使用的高权限的帐户，尽管活动应自动审核，并且最好是，通过用户执行所做的更改和其他用户观察所做的更改，以最小化无意不恰当使用或错误配置的可能性来执行。 当已完成的活动时，从管理员组应立即删除的帐户。 这可以实现通过手动过程，并记录进程，通过第三方特权的身份访问管理 (PIM/PAM) 软件或两者的组合。  
  
管理员是，默认情况下，大多数广告 DS 对象在各自域的所有者。 此组中的会员可能会要求在版本和灾难所有权或拍摄对象的所有权的功能是必需的恢复方案中。 此外，DAs 和 EAs 文件沿用文件大量其权限和依靠其默认会员管理员组中的权限。 默认组嵌套为特权的组中的 Active Directory 不应进行修改，并且应安全每个域管理员组，述[附录 g：保护管理员中的组 Active Directory](../../../ad-ds/plan/security-best-practices/Appendix-G--Securing-Administrators-Groups-in-Active-Directory.md)，并在下面的常规说明。  
  
1.  提供保护中所述，从管理员组，但的本地管理员帐户域，可能不删除的所有成员[附录 d：保护内置管理员帐户中的 Active Directory](../../../ad-ds/plan/security-best-practices/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory.md)。  
  
2.  登录到成员服务器或工作站永远不需要的域的管理员组成员。 在一个或多个 Gpo 链接到工作站和成员服务器华丽绚烂的每个域，应以下的用户权限添加管理员组：  
  
    -   拒绝该计算机的访问从网络  
  
    -   作为批量作业，拒绝登录  
  
    -   作为一项服务拒绝登录  
  
    -   这将阻止管理员组成员用于登录或连接到服务器成员或工作站（除非被首先破坏多个控件），其中其凭据可能会缓存，从而威胁。 特权的帐户永远不会应用于登录到不太特权系统，和履行这些控件提供防御数量的攻击。  
  
3.  At 域控制器中森林，该组中的每个域组织单位应以下的用户授予权限（如果它们还没有这些权限），这将允许管理员组成员的执行树林灾难恢复方案中所需的功能：  
  
    -   访问网络从这台计算机  
  
    -   允许本地登录  
  
    -   允许远程桌面服务通过登录  
  
4.  应配置审核发送通知，如果属性或管理员组的会员进行任何更改。 这些警告音应送交，至少，负责广告 DS 管理团队的成员。 此外应中的安全团队，成员发送通知，并且应定义过程修改管理员组的会员。 具体而言，这些进程应包括安全团队在管理员组即将进行修改，以便当发送通知，它们预期运行了并且不会触发警报时收到通知的过程。 此外，应实现进程通知安全团队时管理员组使用已完成并且从组中删除了使用的帐户。  
  
> [!NOTE]  
> 中 Gpo 管理员组上实现限制时，Windows 将应用到计算机的本地管理员组，除了域管理员组成员的设置。 因此，在管理员组上实现限制时应小心。 登录本地或远程桌面服务通过登录时，禁止网络、批和服务的登录的管理员组成员建议只要很难实现，尽管不会限制。 阻止这些登录类型可以阻止合法的本地管理员组成员计算机管理。 下面的屏幕截图显示配置设置阻止不恰当使用内置的本地并域管理员帐户，除了不恰当使用的内置本地或域管理员组。 请注意，**拒绝登录通过远程桌面服务**用户右不包括管理员组中，因为其包括在此设置会阻止这些本地计算机管理员组成员的帐户登录。 如果计算机上的服务配置为在任何特权组在此部分中所述的环境中运行，实现这些设置会导致失败的应用程序和服务。 因此，所有此部分中的建议，您应该全面测试适用性设置您的环境中。  

>   
> ![最特权管理员模式](media/Implementing-Least-Privilege-Administrative-Models/SAD_3.gif)  
  
### <a name="role-based-access-controls-rbac-for-active-directory"></a>用于 Active Directory 的角色基于访问控制 (RBAC)  
一般而言，角色基于访问控制 (RBAC) 是用户分组并提供访问资源基于业务规则机制。 在使用 Active Directory 的情况下 RBAC 实现广告 DS 是创建的角色的权利和权限委派允许角色成员执行日常的管理任务，而无需授予这些权限过多的进程。 Active Directory 的 RBAC 可以设计，并且可以通过在本机工具和接口，实现利用软件，你可能已经拥有，通过购买了第三方产品，或者这些方法的任意组合。 此部分中不提供分步说明 RBAC 实现 Active Directory，但改为讨论中选择实现 RBAC 广告 DS 安装在不同的推送方案的考虑的因素。  
  
#### <a name="native-approaches-to-rbac-for-active-directory"></a>本机 RBAC Active Directory 的方法  
可在的最简单的 RBAC 实现实现作为广告 DS 组中的角色和委派的权利和允许他们执行的角色指定的范围内的每日管理这些组的权限。  
  
在某些情况下，可以使用 Active Directory 中的现有安全组授予权限和作业功能与相应的权限。 例如，如果在你的组织 IT 特定员工负责管理和维护 DNS 区域记录，委派这些责任可以像创建适用于每位 DNS 管理员帐户并将其添加到 DNS 管理员组 Active Directory 简单。 DNS 管理员组，与不同的更高权限的组中，有一些功能强大的权利跨 Active Directory，尽管这组成员已委派允许他们管理 DNS 的权限。  
  
在其他情况下，你可能需要创建安全组和委派权利以及 Active Directory 对象、对象文件系统和注册表对象的权限，以允许的组成员执行指定的管理任务。 例如，如果帮助 Desk 运算符负责重置忘记了的密码，协助有关连接问题的用户和疑难解答应用程序设置，你可能需要用户 Active Directory 对象委派设置结合允许远程连接到用户的计算机来查看或修改的用户配置设置服务台用户的权限。 对于你定义每个角色，你应找出：  
  
1.  角色哪些任务成员执行日常和不太频繁地执行的任务。  
  
2.  哪些系统和应用程序在其中角色中的成员应授予权限。  
  
3.  应该允许哪些用户角色中的成员。  
  
4.  将进行管理的角色会员身份的方式。  
  
许多环境中，在手动创建进行管理的 Active Directory 环境角色基于访问控件会很困难实施和维护。 如果您已经清楚地定义角色和管理 IT 基础结构责任，你可能想要充分利用其他工具可帮助你创建一个易于管理的原始 RBAC 部署。 例如，如果您的环境中使用 Forefront 身份管理器 (FIM)，你可以使用 FIM 自动创建和管理角色，可以简化持续管理的总体。 如果你使用的 System Center Configuration Manager (SCCM) 和 System Center Operations Manager (SCOM)，可以使用特定于应用程序的角色委派管理和监控功能，并配置一致性和审核跨域中的系统也强制执行。 如果你已实现公共基础结构 (PKI)，可以颁发和 IT 人员负责管理环境需要智能卡。 与 FIM 凭据管理（FIM 厘米），你甚至可以组合管理的角色和凭据您管理的人员。  
  
在其他情况下，它可能更适合组织考虑部署提供"框中"功能的第三方 RBAC 软件。 许多供应商通过提供 RBAC 的 Active Directory、Windows 和非 Windows 目录操作系统的商业、现成 (COTS) 解决方案。 在选择之间本机解决方案和第三方产品时，你应该考虑以下因素：  
  
1.  Budget：通过投资开发 RBAC 使用的软件和你可能已经拥有的工具，可以减少参与部署解决方案软件成本。 但是，除非你具有中创建和部署本机 RBAC 解决方案熟悉的人员，你可能需要吸引咨询资源制定解决方案。 特别是在你 budget 有限是否，您应该仔细权衡预期的成本自定义开发的解决方案开销部署"框中"解决方法。  
  
2.  IT 环境组成： 如果您的环境主要组成 Windows 系统，或者如果你已利用 Active Directory 的非 Windows 系统和帐户管理，自定义本机解决方案可能会提供最佳解决方案，为你的需求。 如果您的基础结构包含许多未运行 Windows，且不受 Active Directory 的系统，你可能需要考虑管理非 Windows 系统独立于 Active Directory 环境的选项。  
  
3.  在解决方案特权模型： 如果产品依赖于高权限的组 Active Directory 中插入服务帐户位置和是否有不需要特权过多的优惠选项可授予 RBAC 软件中，你确实不减少你 Active Directory 攻击 surfaceyou 已仅更改的目录中特权最大的组构成。 应用程序供应商可以提供的控件的最小化的帐户被威胁并恶意使用概率服务帐户，除非你可能希望考虑其他选项。  

  
### <a name="privileged-identity-management"></a>特权的标识管理  
特权标识管理 (PIM)，有时会到作为特权帐户管理 (PAM) 或特权的凭据管理 (PCM) 版设计，建筑，不过的方法来管理实现特权在您的基础结构的帐户。 一般而言，PIM 提供的机制通过该帐户被授予临时权限，并执行生成或中断需权限修复功能，而不是保留永久附加到帐户的权限。 是否 PIM 功能手动创建或通过实现部署的一个或多个以下功能的第三方软件可能会提供：  
  

-   凭据"仓库，"位置"注销"并分配初始的密码，然后"签入"当已完成的活动，届时会再次重置密码的帐户权限帐户的密码。  
  
-   使用时间限制限制的特权凭据  
  
-   一次使用凭据  
  
-   流生成授予权限监视和完成时分配时间活动报告执行活动和特权自动删除已过期  
  
-   更换的难度编码如用户名和密码脚本与应用程序编程接口 (Api) 中的凭据，允许凭据检索仓库按需从  
  
-   自动服务帐户凭据管理  
  
### <a name="creating-unprivileged-accounts-to-manage-privileged-accounts"></a>创建未经授权的帐户来管理权限的帐户  
管理权限的帐户挑战之一是，默认情况下，可以管理特权受保护的帐户的帐户，并且保护组和保护帐户。 如果你为你安装的 Active Directory 实现相应 RBAC 和 PIM 解决方案，解决方案可能包括允许你有效地 depopulate 填充仅暂时以及何时需要组目录，最特权组成员的方法。  
  
如果实现本机 RBAC 和 PIM，但是，你应该考虑在需要时 Active Directory 中创建有没有特权并与填充和 depopulating 特权仅函数分组的帐户。 [附录 i： 创建管理帐户 Active Directory 中的受保护的帐户和组](../../../ad-ds/manage/component-updates/../../../ad-ds/manage/component-updates/Appendix-I--Creating-Management-Accounts-for-Protected-Accounts-and-Groups-in-Active-Directory.md)提供可用于创建帐户实现此目的的分步说明进行操作。  
  
### <a name="implementing-robust-authentication-controls"></a>实现可靠身份验证控件  
*法律编号六： 真的很某人试图可用也猜不到你的密码。* - [10 变的法律的安全管理](https://technet.microsoft.com/library/cc722488.aspx)  
  
Pass 希代码以及其他凭据盗窃攻击并非特定于 Windows 操作系统，也新不。 在 1997年中创建第一个 pass 哈希攻击。 过去，但是，这些攻击需要自定义的工具、 已 hit-or-miss 在他们的成功，以及所需攻击者已技能程度较高。 本地提取凭据的免费提供、 轻松使用工具引入导致近几年中的数目和的凭据盗窃攻击成功指数增加。 但是，凭据盗窃攻击并未都凭据依据定向和威胁仅机制。  
  
尽管应实现控件，来帮助保护你防御凭据盗窃攻击，应该还标识您的环境中的最有可能攻击的帐户，并实现可靠身份验证这些帐户的控件。 如果你最特权的帐户使用的单个因素身份验证，如用户名和密码 （两个"知道对象，"这是一个身份验证因素），这些帐户弱的保护。 攻击者需要的所有是在知识的用户名和密码与该帐户，相关联的知识并且 pass 哈希攻击不 requiredthe 攻击者可以接受单因素凭据任何系统上的用户身份验证身份。  
  
尽管实现多重身份验证不保护你防御结合受保护的系统可以实现多重身份验证的 pass 哈希攻击。 有关实现系统受保护的详细信息提供在[实现安全管理主机](../../../ad-ds/plan/security-best-practices/Implementing-Secure-Administrative-Hosts.md)，并且身份验证的选项以下部分中进行讨论。  
  
#### <a name="general-authentication-controls"></a>常规身份验证控件  
如果你有未实现多重身份验证，如智能卡，请考虑的操作。 智能卡阻止用户专用密钥防止访问或使用除非对用户提供正确的 PIN、 密码或向智能卡生物标识符公众专用配对中实现专用键的硬件实施的保护。 即使用户的 PIN 或密码被截断的击键记录器在受到威胁的计算机，攻击者可重复使用 PIN 或的密码，还必须物理存在卡。  
  
在其中漫长、 复杂密码已被证明难以实现由于用户阻力的情况下，智能卡提供的机制的用户可以实现相对简单针脚或密码没有正在遭受暴力或彩虹表攻击的凭据。 智能卡 Pin 不存储 Active Directory 中或在本地三千数据库中，尽管凭据哈希可能仍然存储在计算机的已使用的身份验证的智能卡 LSASS 受保护的内存中。  
  
#### <a name="additional-controls-for-vip-accounts"></a>用于 VIP 帐户的更多控制  
智能卡或其他证书基于身份验证机制实施的另一个好处是利用身份验证机制保证保护 VIP 用户可以访问的敏感数据的能力。 身份验证机制保证在其中功能级别设置为 Windows Server 2012 或 Windows Server 2008 R2 域中才可用。 启用后，身份验证机制保证向一个管理员指定全局组成员的用户 Kerberos 令牌当用户的凭据登录使用基于证书登录方法在经过身份验证。  
  
这使资源管理员来控制访问文件、 文件夹和根据是否用户登录使用基于证书登录方法，除了使用证书类型的打印机，如的资源。 例如，用户通过使用一张智能卡登录、 时的用户访问网络资源可指定为不同来自所访问的权限时，用户不会使用一张智能卡 （即，用户在登录时输入用户名和密码）。 身份验证机制保证有关详细信息，请参阅[为 Windows Server 2008 R2 的分步指南中的广告 DS 身份验证机制保证](https://technet.microsoft.com/library/dd378897.aspx)。  
  
#### <a name="configuring-privileged-account-authentication"></a>配置权限的帐户的身份验证  
在针对所有管理的帐户的 Active Directory 启用**要求智能卡登录**特性以及审核 （至少），对更改任何上属性**帐户**对象管理用户帐户 （例如，cn、 名、 sAMAccountName、 范围内和 userAccountControl） 的选项卡。  
  
尽管设置**要求智能卡登录**帐户重置为帐户的密码 120 字符随机值，需要以允许对其进行更改的帐户，密码的权限的用户可以仍覆盖智能卡进行交互登录时，该特性和帐户然后可以用于建立交互式登录时，具有仅的用户名和密码。  
  
在其他情况下，具体配置的客户 Active Directory 和证书 Active Directory 证书 （广告客户服务） 服务或第三方 PKI、 名称 UPN) 中的设置中的特性管理或 VIP 帐户可以针对特定类型的攻击，如下所述。  
  
##### <a name="upn-hijacking-for-certificate-spoofing"></a>证书欺骗 UPN 拦截  
尽管本文的范围之外攻击公共基础结构 (Pki) 详细的讨论，攻击公开并专用 Pki 提高了指数自 2008年。 公用 Pki 违规有广泛公布，但可能更多组织内部 PKI 攻击。 这样一攻击利用 Active Directory 和证书允许欺骗的方式可能很难检测到的其他帐户凭据的攻击。  
  
已加入域的系统进行身份验证的出示的证书时, 便会使用主题或主题替代名称 (SAN) 属性证书中的内容映射到用户在 Active Directory 对象的证书。 根据证书和构成方式的类型，证书中的主题属性通常包含常见用户名 (CN)，如下面的屏幕截图中所示。  
  
![最特权管理员模式](media/Implementing-Least-Privilege-Administrative-Models/SAD_4.gif)  
  
默认情况下，Active Directory 构造用户 CN 通过连接的帐户的名字 +""+ 姓氏。 但是，不需要或保证是唯一，用户 Active Directory 对象 CN 组件，移动到其他位置目录中的用户帐户更改的帐户辨别的名称 （过程将） 是在目录，对象的完整路径中以前的屏幕截图底部窗格中所示。  
  
不能保证证书者名称是静态或唯一，因为内容的主题备用名称常用 Active Directory 中查找用户对象。 颁发给用户的企业证书颁发机构证书 （Active Directory 集成 Ca） 的 SAN 属性通常包含用户 UPN 或电子邮件地址。 因为保证 Upn 都是唯一的广告 DS 树林中，查找通过 UPN 用户对象通常执行作为身份验证、 使用或不证书身份验证过程中所涉及的一部分。  
  
攻击者获取欺诈证书可以利用在中身份验证证书的 SAN 特性 Upn 的使用。 攻击者已威胁能够在读取和写入用户对象 Upn 帐户，如果攻击实现，如下所示：  
  
针对 （如 VIP 用户） 用户对象 UPN 特性暂时更改为不同的值。 三千帐户名称特性和 CN 可以还更改到目前为止，尽管这通常是不必要的之前所述的原因。  
  
更改后的目标帐户 UPN 属性，过时、 启用的用户帐户或刚创建的用户帐户的 UPN 特性更改为最初分配给目标帐户的值。 过时、 启用的用户帐户都是不登录很长一段时间，但不是已禁用的帐户。 它们旨在攻击者打算"隐藏清"出于以下原因：  
  
1.  因为该帐户处于启用状态，但未最近使用，使用的帐户可以确信触发警报自己的方式使禁用的用户帐户可能。  
  
2.  使用现有的帐户不需要管理人员可能会注意到新的用户帐户的创建。  
  
3.  过时和用户帐户仍处于启用状态，通常的各种安全组成员被授予访问简化访问和"混合"现有的用户群体网络上的资源。  
  
用户帐户现在已在其配置目标 UPN 用于一个或多个证书 Active Directory 证书服务都会请求。  
  
当证书已被获得攻击者的帐户时，在"新的"帐户和目标帐户 Upn 返回到其原始值。  
  
攻击者现在有一个或多个用户为其帐户已暂时修改 VIP 用户可提供给资源和应用程序的身份验证的证书。 尽管本文的范围之外是完整的各种方式可以攻击者在其中目标证书和 PKI 讨论，提供此攻击机制来说明原因，你应在监视特权和 VIP 帐户中的更改，特别是对于更改任何属性广告 DS**帐户**选项卡上的帐户 （例如cn，名称、 sAMAccountName、 范围内，以及 userAccountControl)。 除了监视帐户，你应限制可以修改的用户帐户添加到尽可能小一套尽可能管理用户。 同样，应保护管理用户帐户并将其监视的未经授权的更改。  
  


