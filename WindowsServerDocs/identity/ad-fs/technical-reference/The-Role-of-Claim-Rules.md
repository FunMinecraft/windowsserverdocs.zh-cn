---
ms.assetid: 65e474b5-3076-4ba3-809d-a09160f7c2bd
title: "角色的索赔规则"
description: 
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: e47dbecdeee620d3a237ad8d8c41a550d3ef069c
ms.sourcegitcommit: db290fa07e9d50686667bfba3969e20377548504
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/12/2017
---
>适用于：Windows Server 2016，Windows Server 2012 R2、Windows Server 2012

# <a name="the-role-of-claim-rules"></a>角色的索赔规则
在 Active Directory 联合身份验证服务 \(AD FS\) 联合身份验证服务的总体功能是处理包含一组的索赔一个标记。 有关广告金融服务接受，然后问题哪些索赔决策受索赔规则。  
  
## <a name="what-are-claim-rules"></a>什么是索赔规则？  
索赔规则表示企业逻辑，将需要一个或多个传入的索赔，应用到他们的条件实例 \（如果然后 y\ x），并生成一个或多个传出索赔条件参数而异。 有关传入和传出索赔的详细信息，请参阅[索赔角色](The-Role-of-Claims.md)。  
  
当你需要将控制的索赔管道通过索赔流的业务逻辑实现，你可以使用规则索赔。 更多的逻辑概念索赔管道时金绿色的叶 to\ end\ 端过程索赔，索赔规则是你可以使用自定义的索赔通过索赔颁发过程流实际管理元素。  
  
有关索赔管道的详细信息，请参阅[的索赔引擎角色](The-Role-of-the-Claims-Engine.md)。  
  
索赔规则提供以下优势：  
  
-   提供的机制管理员将 run\ 时间企业逻辑信任索赔来自索赔提供商的应用  
  
-   提供的机制管理员定义哪些索赔发布到信赖方  
  
-   对想要允许或拒绝访问的特定用户的管理员提供了丰富且详细的 claims\ 授权功能  
  
### <a name="how-claim-rules-are-processed"></a>索赔规则的处理方式  
通过索赔管道使用处理的索赔规则*索赔引擎*。 索赔引擎是检查传入的用户，所呈现的索赔套联合身份验证服务的逻辑组件并将然后，具体取决于每个规则中的逻辑，产生输出套索赔。  
  
在一起，索赔规则引擎和的一套索赔规则给定的联合信任与关联确定是否应该就是通过、筛选来了解某个特定的条件条件或转换为全新的索赔，通过联合身份验证服务发出作为传出索赔他们前传入的索赔。  
  
有关此过程的详细信息，请参阅[的索赔引擎角色](The-Role-of-the-Claims-Engine.md)。  
  
## <a name="what-are-claim-rule-templates"></a>什么是索赔规则模板？  
广告 FS 包含一组预定义的索赔规则旨在帮助你轻松地的模板选择，并创建你的特定的企业需要最适合索赔规则。 声称的规则模板仅使用索赔规则创建过程。  
  
在 snap\ 内的广告 FS 管理，规则只能创建使用索赔规则模板。 若要选择索赔规则模板、输入规则逻辑必需的数据和它保存到配置数据库 snap\ 中使用后，它将 \（从该点 forward\) 中提到作为索赔规则 UI。  
  
### <a name="how-claim-rule-templates-work"></a>如何声称规则模板工作  
第一次看到索赔规则模板似乎输入只需表单上传入的索赔收集数据和流程特定逻辑 snap\ 接提供。 但是，在更加详细级别，声称规则模板官方商城必要声称规则语言框架构成供你无需非常知道的语言中快速创建规则必要的基本的逻辑。  
  
每个用户界面中提供的模板 \(UI\) 表示预填充的索赔规则语言语法，基于最常所需的管理任务。 有一个规则模板不过，这就是异常。 此模板称为自定义规则模板。 使用此模板时，任何语法预先不设置。 改为必须直接创作使用索赔规则语言语法索赔规则模板表单正文中的索赔规则语言语法。  
  
有关如何使用索赔规则语言语法的详细信息，请参阅[声称规则语言的角色](The-Role-of-the-Claim-Rule-Language.md)广告 FS 部署指南中。  
  
> [!TIP]  
> 你可以查看单击关联随时使用规则的索赔规则语言**视图规则语言**按钮上的索赔规则属性。  
  
### <a name="how-to-create-a-claim-rule"></a>如何创建索赔规则  
声称规则创建单独联合身份验证服务在每个联盟的信任关系，并且未被共享跨多个信任。 你可以从索赔规则模板创建一个规则、从头开始通过创作索赔规则语言的使用规则或使用 Windows PowerShell 自定义规则。  
  
所有这些选项同时存在来为你提供选择相应的方法给定情景的灵活性。 有关如何创建索赔规则的详细信息，请参阅[配置声称规则](https://technet.microsoft.com/library/ee913571.aspx)广告 FSDeployment 指南中。  
  
#### <a name="using-claim-rule-templates"></a>使用索赔规则模板  
声称的规则模板仅使用索赔规则创建过程。 你可以使用任何以下模板创建索赔规则：  
  
-   通过或筛选传入的声明  
  
-   转换传入的声明  
  
-   作为索赔发送 LDAP 属性  
  
-   作为索赔发送组成员  
  
-   发送索赔使用自定义规则  
  
-   允许或拒绝用户基于传入的声明  
  
-   允许所有用户  
  
有关详细信息，其中的每个描述声称规则模板，请参阅[确定类型的声称规则模板到使用](Determine-the-Type-of-Claim-Rule-Template-to-Use.md)。  
  
#### <a name="using-the-claim-rule-language"></a>使用索赔规则语言  
超出了标准索赔规则模板范围的业务规则，你可以使用自定义规则模板 express 一系列的使用规则索赔语言复杂的逻辑条件。 有关使用自定义规则的详细信息，请参阅[何时使用自定义的索赔规则](When-to-Use-a-Custom-Claim-Rule.md)。  
  
#### <a name="using-windows-powershell"></a>使用 Windows PowerShell  
你还可以使用与 Windows PowerShell ADFSClaimRuleSet cmdlet 对象来创建或管理规则广告 FS 中。 有关如何使用 Windows PowerShell 与此 cmdlet 的详细信息，请参阅[与 Windows PowerShell 广告 FS 管理](https://go.microsoft.com/fwlink/?LinkID=179634)。  
  
## <a name="what-is-a-claim-rule-set"></a>索赔规则设置是什么？  
下图所示索赔规则集是给定的联合信任将定义索赔索赔规则引擎的处理方式的一个或多个规则的分组。 传入的声明收到联合身份验证服务时索赔规则引擎应用进行了相应的索赔规则组指定的逻辑。 它是逻辑的最终将确定索赔给定信任完整颁发的方式设置中的每个规则从集合。  
  
![广告 FS 角色](media/adfs2_claimruleset.gif)  
  
索赔规则处理给定的规则组内的时间顺序索赔引擎。 此订单很重要，，因为个规则的输出可以使用一组中的下一个规则的输入。  
  
## <a name="what-are-claim-rule-set-types"></a>什么是索赔规则设置类型？  
索赔规则集类型明确识别是否信任与关联的索赔规则集将用于索赔颁发、授权或验收联合信任是逻辑段。 每个联合的信任可以有一个或多个索赔规则设置类型与之关联，具体取决于所使用的信任的类型。  
  
下表介绍了各种类型的索赔规则集和解释与索赔提供商信任或信赖方信任其关系。  
  
|索赔规则集类型|描述|使用上|  
|-----------------------|---------------|-----------|  
|验收转换规则集|一套特定于您使用的索赔规则索赔提供商信任指定将从索赔提供商组织接受传入索赔和将发送到信赖的方信任传出索赔。<br /><br />用于源该组规则传入声明将颁发转换规则设置为在索赔提供商的组织中指定的输出索赔。<br /><br />默认情况下，索赔提供商信任节点包含一个名为的索赔提供商信任**Active Directory**用于表示验收转换规则集的来源特性应用商店。 此信任对象用于表示与网络上的 Active Directory 数据库联合身份验证服务的连接。 此默认信任什么处理经过 Active Directory 的用户提起的索赔并且无法删除。|索赔提供商信任|  
|颁发转换规则集|使用上信赖的方信任指定将给信赖一方发出索赔的索赔规则的一组。<br /><br />用于源该组规则传入索赔最初将输出验收转换规则索赔。|依赖方信任|  
|颁发授权规则集|你使用信赖的方信任指定的用户，将有权接收依赖方标记的索赔规则一组。<br /><br />这些规则确定用户是否可以接收依赖方，因此，访问到依赖方提起的索赔。<br /><br />除非你指定颁发授权规则，所有用户将默认都拒绝访问。|依赖方信任|  
|委派授权规则集|使用上信赖的方信任指定将允许用作委托依赖方到其他用户的用户的索赔规则的一组。<br /><br />这些规则确定是否允许申请者模拟仍来源发送给信赖方令牌中的申请者时的用户。<br /><br />除非你指定颁发授权规则，没有用户可以作为默认情况下委托。|依赖方信任|  
|模拟授权规则集|一套索赔规则，你可以使用 Windows PowerShell 以确定是否有的用户配置可以完全模拟依赖方到的其他用户。<br /><br />这些规则确定是否允许申请者以不识别中将被发送至依赖方令牌申请者模拟用户。<br /><br />模拟另一个用户这种方式是非常强大功能，，因为信赖方不知道所模拟用户。|依赖方信任|  
  
若要使用你的组织中的相应的索赔规则查看有关选择详细信息[确定类型的声称规则模板到使用](Determine-the-Type-of-Claim-Rule-Template-to-Use.md)。  
  

