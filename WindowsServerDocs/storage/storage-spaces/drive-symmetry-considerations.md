---
title: 存储空间直通驱动器对称注意事项
ms.author: cosdar
ms.manager: eldenc
ms.technology: storage-spaces
ms.topic: article
author: cosmosdarwin
ms.date: 10/08/2018
Keywords: Storage Spaces Direct
ms.localizationpriority: medium
ms.openlocfilehash: 629e49a0c1919286d8e4f418b3e99d69e720f4fd
ms.sourcegitcommit: f2ef58003da6de049c7c4b578f789a97e0a0f512
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/26/2018
ms.locfileid: "5591843"
---
# 存储空间直通驱动器对称注意事项 

> 适用于： Windows Server 2019、 Windows Server 2016

[存储空间直通](storage-spaces-direct-overview.md)适合当每个服务器具有相同的驱动器。

事实上，我们知道这并不总是可行： 存储空间直通旨在运行年和扩展，如发展你的组织的需求。 现在，你可以购买宽频 3 TB 的硬盘驱动器;下一年，这可能会变得无法找到的较小。 因此，支持一定程度的混合和匹配。

本主题介绍了限制，并提供支持和不支持的配置的示例。

## 约束

### 类型

所有服务器都应都具有相同[类型的驱动器](choosing-drives.md#drive-types)。

例如，如果一个服务器具有 NVMe，它们应*所有*具有 NVMe。

### 数字

所有服务器都应都具有相同数量的每种类型的驱动器。

例如，如果一个服务器具有六个 SSD，它们应*所有*具有六个 SSD。

   > [!NOTE]
   > 它是适合的不同暂时期间失败或者在添加或删除驱动器的驱动器数量。

### 型号

我们建议使用的相同的模型和固件版本尽可能驱动器。 如果你不能请仔细选择尽可能类似的驱动器。 我们不鼓励混合和匹配具有显著降低、 不同的性能或耐用性特征的相同类型的驱动器 （除非有缓存，另一个容量） 因为存储空间直通的均匀分布 IO 并且不会区分具体取决于模型.

   > [!NOTE]
   > 最好混合和匹配类似 SATA 和 SAS 驱动器。

### 大小

我们建议使用的相同大小尽可能驱动器。 使用不同大小的容量驱动器可能会导致某些不可用的容量，并使用不同大小的缓存驱动器可能不能提高缓存性能。 请参阅下的一部分详细信息。

   > [!WARNING]
   > 在服务器之间的不同容量驱动器大小可能会导致闲置容量。

## 了解： 容量不平衡

存储空间直通就可以防止容量不平衡跨驱动器和服务器。 即使不平衡严重，所有内容都将继续工作。 但是，具体取决于多种因素，在每个服务器中不可用的容量可能无法使用。

若要了解为什么发生这种情况，请考虑简化的图。 每个彩色的框表示一份镜像数据。 例如，这些框 \ 对标记为 A、 A，和一个是相同的数据的三个副本。 接受服务器容错，*必须*这些副本存储在不同的服务器。

### 闲置的容量

绘制，服务器 1 (10 TB) 和服务器 2 (10 TB) 已满。 服务器 3 具有更大的驱动器，因此其总容量为更大 (15 TB)。 但是，更多的三向镜像数据存储在服务器 3 上需要服务器 1 和 2 号服务器上的副本，已满。 不能用于服务器 3 上剩余 5 TB 的容量，它是 *"孤立"* 容量。

![三向镜像，三个服务器，孤立的容量](media/drive-symmetry-considerations/Size-Asymmetry-3N-Stranded.png)

### 最佳位置

相反，使用四个服务器的 10 TB、 10 TB、 10 TB 和 15 TB 的容量和三向镜像复原，它** 可以有效将副本放置所有可用容量，用作绘制的方式。 每当做到这一点，存储空间直通分配器会查找和使用的最佳位置，没有孤立的容量。

![三向镜像，四个服务器，没有闲置的容量](media/drive-symmetry-considerations/Size-Asymmetry-4N-No-Stranded.png)

闲置的容量是否会影响服务器、 复原的严重程度容量不平衡，以及其他因素的数量。 **最明智的一般规则是假定每个服务器中可用的唯一容量保证可用于。**

## 了解： 缓存不平衡

存储空间直通就可以防止缓存不平衡跨驱动器和服务器。 即使不平衡严重，所有内容都将继续工作。 此外，存储空间直通始终使用最充分地所有可用的缓存。

但是，使用不同大小的缓存驱动器可能不能提高缓存性能统一或预见： 仅向使用较大的缓存驱动器的[驱动器绑定](understand-the-cache.md#server-side-architecture)的 IO 可能会看到提高的性能。 存储空间直通在绑定中均匀分布 IO 并不区分具体取决于缓存容量比率。

![缓存不平衡](media/drive-symmetry-considerations/Cache-Asymmetry.png)

   > [!TIP]
   > 请参阅[了解缓存](understand-the-cache.md)以详细了解缓存绑定。

## 示例配置

下面是一些支持和不受支持的配置：

### ![受支持](media/drive-symmetry-considerations/supported.png) 受支持： 服务器之间的不同模型

前两个服务器使用 NVMe 模型"X"，但是第三个服务器使用 NVMe 模型的"Z"，这非常相似。

| 服务器 1                    | 服务器 2                    | 服务器 3                    |
|-----------------------------|-----------------------------|-----------------------------|
| 2 个 NVMe 型号 X （缓存）    | 2 个 NVMe 型号 X （缓存）    | 2 个 NVMe 型号 Z （缓存）    |
| 10 倍 SSD 模型 Y （容量） | 10 倍 SSD 模型 Y （容量） | 10 倍 SSD 模型 Y （容量） |

这是受支持。

### ![受支持](media/drive-symmetry-considerations/supported.png) 受支持： 服务器中的不同模型

每个服务器使用一些不同混合使用 HDD 模型"Y"和"Z"，这非常相似。 每个服务器都有 10 总 HDD。

| 服务器 1                   | 服务器 2                   | 服务器 3                   |
|----------------------------|----------------------------|----------------------------|
| 2x SSD 模型 X （缓存）    | 2x SSD 模型 X （缓存）    | 2x SSD 模型 X （缓存）    |
| 7 x HDD 模型 Y （容量） | 5 x HDD 模型 Y （容量） | 1 倍 HDD 模型 Y （容量） |
| 3 倍 HDD 模型 Z （容量） | 5 x HDD 模型 Z （容量） | 9 x HDD 模型 Z （容量） |

这是受支持。

### ![受支持](media/drive-symmetry-considerations/supported.png) 受支持： 在服务器之间的不同大小

前两个服务器使用 4 TB HDD 但第三个服务器使用非常类似 6 TB HDD。

| 服务器 1                | 服务器 2                | 服务器 3                |
|-------------------------|-------------------------|-------------------------|
| 2 x 800 GB NVMe （高速缓存） | 2 x 800 GB NVMe （高速缓存） | 2 x 800 GB NVMe （高速缓存） |
| 4 x 4 TB HDD （容量） | 4 x 4 TB HDD （容量） | 4 x 6 TB HDD （容量） |

支持此功能，尽管它会导致闲置容量。

### ![受支持](media/drive-symmetry-considerations/supported.png) 受支持： 服务器中的不同大小

每个服务器使用 1.2 TB 和非常类似 1.6 TB SSD 的一些不同组合。 每个服务器都有 4 个总 SSD。

| 服务器 1                 | 服务器 2                 | 服务器 3                 |
|--------------------------|--------------------------|--------------------------|
| 3 x 1.2 TB SSD （缓存）   | 2 x 1.2 TB SSD （缓存）   | 4 x 1.2 TB SSD （缓存）   |
| 1 个 1.6 TB SSD （缓存）   | 2 个 1.6 TB SSD （缓存）   | -                        |
| 20 x 4 TB HDD （容量） | 20 x 4 TB HDD （容量） | 20 x 4 TB HDD （容量） |

这是受支持。

### ![不受支持](media/drive-symmetry-considerations/unsupported.png) 不支持： 不同类型的驱动器在服务器之间

服务器 1 具有 NVMe，但其他不。

| 服务器 1            | 服务器 2            | 服务器 3            |
|---------------------|---------------------|---------------------|
| 6 x NVMe （缓存）    | -                   | -                   |
| -                   | 6 x SSD （缓存）     | 6 x SSD （缓存）     |
| 18 x HDD （容量） | 18 x HDD （容量） | 18 x HDD （容量） |

这不受支持。 驱动器类型的应在每个服务器中均相同。

### ![不受支持](media/drive-symmetry-considerations/unsupported.png) 不支持： 在服务器之间每种类型的不同数量

服务器 3 具有比他人做得更多的驱动器。

| 服务器 1            | 服务器 2            | 服务器 3            |
|---------------------|---------------------|---------------------|
| 2 x NVMe （缓存）    | 2 x NVMe （缓存）    | 4 x NVMe （缓存）    |
| 10 x HDD （容量） | 10 x HDD （容量） | 20 x HDD （容量） |

这不受支持。 每种类型的驱动器数量应在每个服务器中均相同。

### ![不受支持](media/drive-symmetry-considerations/unsupported.png) 不支持： 仅 HDD 驱动器

所有服务器都具有仅连接的 HDD 驱动器。

|服务器 1|服务器 2|服务器 3|
|-|-|-| 
|18 x HDD （容量） |18 x HDD （容量）|18 x HDD （容量）|

这不受支持。 你需要添加两个缓存驱动器 （NvME 或 SSD） 附加到每个服务器的最小值。

## 摘要

若要回顾一下，在群集中的每个服务器应具有相同类型的驱动器和相同数量的每种类型。 它被支持混合和匹配驱动器模型和驱动器大小在必要时，与上述的注意事项。

| 约束                               |               |
|------------------------------------------|---------------|
| 每个服务器中的驱动器的相同类型     | **必需**  |
| 相同数量的每个服务器中的每个类型 | **必需**  |
| 每个服务器中的相同驱动器模型        | 推荐   |
| 在每个服务器中的相同驱动器大小         | 推荐   |

## 另请参阅

- [存储空间直通的硬件要求](storage-spaces-direct-hardware-requirements.md)
- [存储空间直通概述](storage-spaces-direct-overview.md)
