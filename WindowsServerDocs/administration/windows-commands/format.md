---
title: 格式
ms.prod: windows-server-threshold
manager: dongill
ms.author: JGerend
ms.technology: storage
ms.topic: article
ms.assetid: 51ec7423-9a01-4219-868a-25d69cdcc832
author: JasonGerend
ms.date: 10/16/2017
ms.openlocfilehash: 1af340f4612015ede3fee659c9662955df9aa578
ms.sourcegitcommit: eaf071249b6eb6b1a758b38579a2d87710abfb54
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/31/2019
ms.locfileid: "66439272"
---
# <a name="format"></a>格式
> 适用于：Windows 10、windows Server 2016

格式化磁盘以接受 Windows 文件。

有关如何使用此命令的示例，请参阅[示例](#BKMK_examples)。

## <a name="syntax"></a>语法

```
format <Volume> [/fs:{FAT|FAT32|NTFS}] [/v:<Label>] [/q] [/a:<UnitSize>] [/c] [/x] [/p:<Passes>]
format <Volume> [/v:<Label>] [/q] [/f:<Size>] [/p:<Passes>]
format <Volume> [/v:<Label>] [/q] [/t:<Tracks> /n:<Sectors>] [/p:<Passes>]
format <Volume> [/v:<Label>] [/q] [/p:<Passes>]
format <Volume> [/q]
```

## <a name="parameters"></a>Parameters

|   参数    |                                                                                                                                                                                                                    描述                                                                                                                                                                                                                     |
|----------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   \<卷 >    |                                                                                         指定装入点、 卷名称或您想要格式化的驱动器的驱动器号 （后跟一个冒号）。 如果未指定任何以下的命令行选项**格式**使用卷类型来确定磁盘的默认格式。                                                                                         |
|    /fs: {FAT    |                                                                                                                                                                                                                       FAT32                                                                                                                                                                                                                        |
|  /v:\<标签 >   |                           指定卷标。 如果省略 **/v**命令行选项或使用而不指定卷标，**格式**提示你输入卷标，格式设置完成后。 使用语法 **/v:** 以防提示输入卷标。 如果使用单个 **format** 命令格式化多个磁盘，则会为所有磁盘指定相同的卷标。                            |
| /a:\<UnitSize > | 指定要在 FAT、 FAT32 或 NTFS 卷上使用的分配单元大小。 如果未指定 *UnitSize*，则会基于卷大小进行选择。 对于常规使用，强烈建议采用默认设置。 以下列表显示了 NTFS、FAT 和 FAT32 *UnitSize* 的有效值：</br>512</br>1024</br>2048</br>4096</br>8192</br>16K</br>32K</br>64K</br>对于大小超过 512 字节的扇区，FAT 和 FAT32 还支持 128k 和 256k。 |
|       /q       |                                                       执行快速格式化。 删除文件表和根目录下的以前格式化卷，但不会为损坏区域执行扇区的扇区扫描。 应使用 **/q**命令行选项仅格式化以前格式化确定处于良好状态的卷。 请注意， **/q** 可替代 **/p**。                                                       |
|   /f:\<大小 >   |                                                         指定要格式化的软盘的大小。 如果可能，请使用而不是此命令行选项 **/t**并 **/n**命令行选项。 Windows 可接受的大小值如下：</br>-   1440 或 1440k 或 1440kb</br>-   1.44 或 1.44m 或 1.44mb</br>-1.44 MB，双面，四次密度，3.5 英寸磁盘                                                         |
|  /t:\<跟踪 >  |                                                    指定磁盘上的磁道数。 如果可能，请使用 **/f**命令行选项。 如果使用 **/t** 选项，则还必须使用 **/n** 选项。 这些选项共同提供了指定正在格式化的磁盘大小的另一种方法。 此选项对 **/f** 选项无效。                                                     |
| /n:\<扇区 >  |                                                         指定每个磁道的扇区数。如果可能，请使用 **/f**而不是命令行选项 **/n**。 如果使用 **/n**，则还必须使用 **/t**。 这两个选项共同提供了指定正在格式化的磁盘大小的另一种方法。 此选项对 **/f** 选项无效。                                                         |
|  /p:\<传递 >  |                                                                                                                                                               归零卷上的每个扇区的指定操作数量。 此选项对 **/q** 选项无效。                                                                                                                                                                |
|       /c       |                                                                                                                                                                                     仅 NTFS。 默认情况下，将压缩在新卷上创建的文件。                                                                                                                                                                                      |
|       /x       |                                                                                                                                                            如有必要，在格式化卷之前将其卸除。 针对卷的任何打开句柄将不再有效。                                                                                                                                                            |
|       /?       |                                                                                                                                                                                                        在命令提示符下显示帮助。                                                                                                                                                                                                        |

## <a name="remarks"></a>备注

-   管理凭据

    必须是格式化硬盘的管理员组的成员。
-   使用**格式**

    **格式**命令将创建该磁盘的新根目录和文件系统。 它还可以检查该磁盘上的损坏区域，并且能够删除磁盘上的所有数据。 若要能够使用新的磁盘，你必须首先使用此命令对磁盘进行格式化。
-   添加卷标

    格式化软盘之后,**格式**会显示以下消息：

    `Volume label (11 characters, ENTER for none)?`

    若要添加卷标，请键入最多 11 个字符 （包括空格）。 如果您不想要添加到磁盘的卷标，按 ENTER。
-   格式化硬盘

> [!NOTE]
> 必须是要格式化的硬盘的管理员组的成员。

当你使用**格式**命令格式化硬盘，类似于以下显示一条警告消息：
```
WARNING, ALL DATA ON NON-REMOVABLE DISK 
DRIVE x: WILL BE LOST! 
Proceed with Format (Y/N)? _ 
```
若要格式化硬盘，请按 Y;如果您不想要格式化该磁盘，按 n。
-   单元大小

    FAT 文件系统群集数限制为不超过 65526。 将群集之间 65527 4177917 数限制在 FAT32 文件系统。

    大小超过 4096 的分配单元不支持 NTFS 压缩。

> [!NOTE]
> **格式**将立即停止处理如果确定不能使用指定的群集大小满足上述要求。
> -   **格式**消息

    When formatting is complete, **format** displays messages that show the total disk space, the spaces marked as defective, and the space available for your files.
- 快速格式化

  可以通过使用来加快格式化进程 **/q**命令行选项。 仅在硬盘上没有损坏扇区的情况下使用此选项。
- 将 **format** 与重新分配的驱动器或网络驱动器一起使用

  不应针对使用 **subst** 命令准备就绪的驱动器使用 **format** 命令。 不能通过网络对磁盘进行格式化。
- **format** 退出代码

  下表列出了每个退出代码以及其含义的简要说明。  

  |退出代码|描述|
  |---------|-----------|
  |0|格式化操作已成功。|
  |1|提供了不正确的参数。|
  |4|将出现致命错误 （即 0、 1 或 5 以外的任何错误）。|
  |5|用户按下 N 响应提示"继续使用格式 （是/否）？" 以停止此进程。|

  可以结合使用 ERRORLEVEL 环境变量和 **if** 批处理命令来检查这些退出代码。
- 在恢复控制台中使用 **format**

  可从恢复控制台获取具有不同参数的 **format** 命令。

## <a name="BKMK_examples"></a>示例

若要使用默认大小格式化驱动器 A 中的新软盘，请键入：
```
format a:
```
若要在驱动器 A 的以前格式化的软盘上执行快速格式化操作，请键入：
```
format a: /q
```
若要格式化驱动器 A 中的软盘，并为其分配卷标 "DATA"，请键入：
```
format a: /v:DATA
```

#### <a name="additional-references"></a>其他参考

[命令行语法项](https://technet.microsoft.com/library/cc771080.aspx)