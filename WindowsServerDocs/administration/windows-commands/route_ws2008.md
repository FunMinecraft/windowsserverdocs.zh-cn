---
title: route_ws2008
description: 了解如何修改和显示本地 IP 路由表中的条目。
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: afcd666c-0cef-47c2-9bcc-02d202b983b3
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 07/11/2018
ms.openlocfilehash: 30843fe94ac7a4dc60092adcede60120bc9e627f
ms.sourcegitcommit: eaf071249b6eb6b1a758b38579a2d87710abfb54
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/31/2019
ms.locfileid: "66441767"
---
# <a name="routews2008"></a>route_ws2008

>适用于：Windows 服务器 （半年频道），Windows Server 2016 中，Windows Server 2012 R2、 Windows Server 2012

显示和修改本地 IP 路由表中的条目。 使用不带参数，**路由**显示帮助。   

## <a name="syntax"></a>语法  
```  
route [/f] [/p] [<Command> [<Destination>] [mask <Netmask>] [<Gateway>] [metric <Metric>]] [if <Interface>]]  
```  

### <a name="parameters"></a>Parameters  

|参数|描述|  
|-------|--------|  
|/f|清除所有条目不是主机路由 （网络掩码 255.255.255.255）、 环回网络路由 （具有目标为 127.0.0.0 和网络掩码为 255.0.0.0 的路由） 或多播的路由的路由表 （具有目标为 224.0.0.0 路由和网络掩码为 240.0.0.0 的）。 如果这与某个命令 （如添加、 更改或删除） 结合使用，在运行命令前清除表。|  
|/p|如果使用添加命令，指定的路由添加到注册表和用于初始化 IP 路由表，每次启动 TCP/IP 协议时。 默认情况下，添加的路由不会保留时启动 TCP/IP 协议。 如果用于打印命令，显示持久性路由的列表。 对于所有其他命令，则忽略此参数。 永久路由存储在注册表位置**HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\PersistentRoutes**。|  
|\<命令 >|指定你想要运行的命令。 下表列出了有效的命令：<br /><br />-   **添加：** 添加一个路由。<br />-   **更改：** 修改现有的路由。<br />-   **删除：** 删除路由。<br />-   **打印：** 打印路由。|  
|\<目标 >|指定的路由的网络目标。 目标可以是 IP 网络地址 （其中的网络地址的主机位设置为 0）、 主机路由的 IP 地址或默认路由 0.0.0.0。|  
|掩码\<子网掩码 >|指定的路由的网络目标。 目标可以是 IP 网络地址 （其中的网络地址的主机位设置为 0）、 主机路由的 IP 地址或默认路由 0.0.0.0。|  
|\<Gateway>|指定通过该地址由网络目标和子网掩码定义的一组是可访问的转发或下一个跃点 IP 地址。 对于本地连接的子网的路由的网关地址是分配给附加到子网的接口的 IP 地址。 对于远程路由，可在一个或多个路由器、 网关地址是直接到达的 IP 地址分配给相邻路由器。|  
|指标\<度量值 >|指定整数成本度量值 （范围从 1 到 9999 之间） 的路由在路由表中最接近匹配要转发的数据包的目标地址的多个路由之间进行选择。 选择具有最低跃点数的路由。 度量值可以反映跃点数目、 路径、 路径可靠性、 路径吞吐量或管理属性的速度。|  
|如果\<接口 >|指定目标可访问的接口的接口索引。 有关接口和其相应的接口索引的列表，请使用路由打印命令的显示。 您可以对接口索引使用十进制或十六进制值。 十六进制值优先于十六进制数以 0x。 时如果省略参数，该接口由网关地址。|  
|/?|在命令提示符下显示帮助。|  

## <a name="remarks"></a>备注  
- 较大值**指标**路由表的列是允许 TCP/IP 自动确定基于配置的 IP 地址、 子网掩码和默认网关的路由表中的路由的跃点数的结果为每个 LAN 接口。 接口跃点数，默认情况下，启用自动确定确定每个接口的速度，并调整每个接口的路由的指标，使最快的接口跃点数最少所创建的路由。 若要删除大型度量值，禁用自动确定每个 LAN 连接的 TCP/IP 协议的高级属性中的接口跃点数。  
- 名称可用于*目标*如果在存储中的本地网络文件中存在的相应条目<strong>systemroot\System32\Drivers\\</strong>Etc 文件夹。 名称可用于*网关*只要它们能被解析为 IP 地址通过标准的主机名称解析技术，如域名系统 (DNS) 查询，使用本地主机文件中存储的<strong>systemroot\system32\drivers\\</strong>etc 文件夹和 NetBIOS 名称解析。  
- 如果该命令是**打印**或**删除**，则*网关*可以省略参数，通配符可以用于目标和网关。 *目标*值可以是由星号 （*） 指定的通配符值。 如果指定的目标包含一个星号 (\*) 或问号 （？），它被视为通配符和打印或删除唯一匹配的目标路由。 星号匹配任何字符串，并问号匹配任何单个字符。 例如，10 个。\*.1、 192.168。\*、 127。\*，并\*224\*是星号通配符的有效使用。  
- 使用无效的目标和子网掩码 （子网掩码） 值的组合，将显示"路由： 错误的网关地址子网掩码"错误消息。 当目标包含一个或多个位在其中相应的子网掩码位设置为 0 的位位置设置为 1 时，会出现此错误消息。 若要测试这种情况，表示使用二进制表示法的目标和子网掩码。 以二进制表示法表示的子网掩码包含一系列的 1 位，表示目标的网络地址部分和一系列的 0 位数，表示目标的主机地址部分。 检查以确定是否有目标中的位设置为 1。 对于目标可以是主机地址 （如子网掩码定义） 的一部分。  
- **/P**参数仅用于 Windows NT 4.0、 Windows 2000，Windows Millennium edition、 Windows XP 和 Windows Server 2003 支持路由命令。 此参数不受**路由**命令，以进行 Windows 95 或 Windows 98。  
- 此命令是作为一个组件中的网络连接的网络适配器的属性在安装了 Internet 协议 (TCP/IP) 协议的情况下才可用。  

## <a name="BKMK_Examples"></a>示例  
若要显示 IP 路由表的全部内容，请键入：  
```  
route print  
```  
若要开始使用 10 IP 路由表中显示的路由，请键入：  
```  
route print 10.*  
```  
若要添加 192.168.12.1 的默认网关地址的默认路由，请键入：  
```  
route add 0.0.0.0 mask 0.0.0.0 192.168.12.1  
```  
若要添加到与子网掩码 255.255.0.0 和下一跃点地址为 10.27.0.1 10.41.0.0 目标路由，请键入：  
```  
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1  
```  
若要添加到与子网掩码 255.255.0.0 和下一跃点地址为 10.27.0.1 目标 10.41.0.0 持久性路由，请键入：  
```  
route /p add 10.41.0.0 mask 255.255.0.0 10.27.0.1  
```  
若要将路由添加到目标 10.41.0.0 与子网掩码为 255.255.0.0 下, 一跃点地址为 10.27.0.1，跃点数为 7，请键入：  
```  
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 metric 7  
```  
若要将路由添加到具有子网掩码为 255.255.0.0 的目的地 10.41.0.0 下, 一个跃点地址的 10.27.0.1，接口索引 0x3，键入：  
```  
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 if 0x3  
```  
若要删除具有子网掩码为 255.255.0.0 的目的地 10.41.0.0 路由，请键入：  
```  
route delete 10.41.0.0 mask 255.255.0.0  
```  
若要删除的所有路由器 IP 路由表中开始使用 10，请键入：  
```  
route delete 10.*  
```  
若要更改由 10.27.0.1 为 10.27.0.25 10.41.0.0 目标和子网掩码 255.255.0.0 路由的下一个跃点地址，请键入：  
```  
route change 10.41.0.0 mask 255.255.0.0 10.27.0.25  
```  

## <a name="additional-references"></a>其他参考  
-   [命令行语法项](command-line-syntax-key.md)  
