---
title: robocopy
description: 了解如何使用 Windows 和 Windows Server 中的 robocopy 命令来复制文件
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: d4c6e8e9-fcb3-4a4a-9d04-2d8c367b6354
author: coreyp-at-msft
ms.author: coreyp
manager: lizapo
ms.date: 07/25/2018
ms.openlocfilehash: a10b3d3877e9511164d298bcc1dab11540e6f596
ms.sourcegitcommit: 0b5fd4dc4148b92480db04e4dc22e139dcff8582
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/24/2019
ms.locfileid: "66188205"
---
# <a name="robocopy"></a>robocopy

将文件数据。

## <a name="syntax"></a>语法

```
robocopy <Source> <Destination> [<File>[ ...]] [<Options>]
```

## <a name="parameters"></a>Parameters

|参数|描述|
|---------|-----------|
|\<源 >|指定源目录的路径。|
|\<目标 >|指定目标目录的路径。|
|\<文件 >|指定要复制的文件。 可以使用通配符 (**&#42;** 或 **？** )，如果你想。 如果**文件**未指定参数，  **\*。\*** 用作默认值。|
|\<Options>|指定要与一起使用的选项**robocopy**命令。|

### <a name="copy-options"></a>复制选项

|Option|描述|
|------|-----------|
|/s|副本子目录。 请注意，此选项将排除空的目录。|
|/e|副本子目录。 请注意，此选项将包含空的目录。 有关其他信息，请参阅[备注](#remarks)。|
|/lev:\<N >|将复制只返回前*N*源目录树的级别。|
|/z|将文件复制可重新启动模式。|
|/b|在备份模式下将文件复制。|
|/zb|使用可重新启动模式。 如果访问被拒绝，此选项将使用备份模式。|
|/efsraw|EFS RAW 模式中复制所有的加密的文件。|
|/copy:\<CopyFlags>|指定要复制的文件属性。 此选项的有效值如下：</br>**D**数据</br>**一个**属性</br>**T**时间戳</br>**S** NTFS 访问控制列表 (ACL)</br>**O**所有者信息</br>**U**审核信息</br>默认值为**CopyFlags**是**DAT** （数据、 属性和时间戳）。|
|/dcopy:\<copyflags\>|定义要复制的目录的内容。 默认值是 DA. 选项为 D = data，A = 属性和 T = 时间戳。|
|/sec|使用安全复制文件 (等效于 **/copy:DATS**)。|
|/copyall|将复制所有文件信息 (等效于 **/copy:DATSOU**)。|
|/nocopy|将复制任何文件信息 (与有用 **/清除**)。|
|/secfix|已跳过所有文件，甚至的修补程序文件安全性的。|
|/timfix|已跳过所有文件，甚至的修补程序文件时间的。|
|/purge|删除目标文件和源中不再存在的目录。 有关其他信息，请参阅[备注](#remarks)。|
|/mir|镜像目录树 (等效于 **/e**加上 **/清除**)。 有关其他信息，请参阅[备注](#remarks)。|
|/mov|移动文件，并将它们从删除源后将其复制。|
|/move|移动文件和目录，并将它们从删除源复制后。|
|/a+:[RASHCNET]|将指定的特性添加到复制的文件。|
|/a-:[RASHCNET]|从复制的文件中删除指定的特性。|
|/create|创建目录树和仅限长度为零的文件。|
|/fat|使用 8.3 字符长度 FAT 文件名称创建目标文件。|
|/256|关闭 （长度超过 256 个字符） 的长路径支持。|
|/ mon:\<N >|监视的源，并再次运行时多个*N*检测到更改。|
|/mot:\<M >|监视源，并再次在运行*M*分如果检测到更改。|
|/MT[:N]|创建使用多线程的副本*N*线程。 *N*必须是介于 1 到 128 之间的整数。 默认值为*N*为 8。</br>**/MT**参数不能用于 **/IPG**并 **/EFSRAW**参数。</br>使用输出重定向 **/log**选项以获取更好的性能。</br>注意：/MT 参数适用于 Windows Server 2008 R2 和 Windows 7。|
|/rh:hhmm-hhmm|指定新的副本可能会开始时的运行的时间。|
|/pf|检查每个文件 （不每步） 运行时间。|
|/ipg:n|指定间数据包间隙以释放上慢速线路的带宽。|
|/sl|不遵循符号链接，并改为创建的链接的副本。|

> [!IMPORTANT]
> 使用时 **/SECFIX**复制选项，指定你想要通过还使用这些其他复制选项之一，将复制的安全信息的类型：
>- **/COPYALL**
>- **/COPY:O**
>- **/COPY:S**
>- **/COPY:U**
>- **/SEC**

### <a name="file-selection-options"></a>文件选择选项

|Option|描述|
|------|-----------|
|/a|仅复制的文件为其**存档**属性设置。|
|/m|仅复制的文件为其**存档**属性设置，并将重置**存档**属性。|
|/ia:[RASHCNETO]|包括仅为其设置任何指定的特性的文件。|
|/xa:[RASHCNETO]|排除设置指定任何的特性文件。|
|/xf \<FileName>[ ...]|排除与指定的名称或路径相匹配的文件。 请注意，*文件名*可包含通配符 (**&#42;** 并 **？** )。|
|/xd \<Directory>[ ...]|不包括匹配的指定的名称和路径的目录。|
|/xc|不包括已更改的文件。|
|/xn|排除较新的文件。|
|/xo|排除较旧的文件。|
|/xx|排除额外文件和目录。|
|/xl|不包括"孤立"的文件和目录。|
|/is|包括相同的文件。|
|/it|包括"调整"文件。|
|/ 最大值：\<N >|指定的最大文件大小 (以排除文件大于*N*字节)。|
|/min:\<N >|指定的最小文件大小 (以排除文件小于*N*字节)。|
|/maxage:\<N >|指定最大文件保留时间 (以排除文件保留时间超过*N*天或日期)。|
|/minage:\<N >|指定最短文件保留时间 (排除文件比*N*天或日期)。|
|/maxlad:\<N >|指定上次访问日期最大值 (不包括由于未使用的文件*N*)。|
|/minlad:\<N >|指定上次访问日期最小 (不包括使用过的文件*N*) 如果*N*小于 1900， *N*指定的天数。 否则为*N*指定一个日期，格式为 YYYYMMDD。|
|/xj|排除交接点，默认情况下通常包含。|
|/fft|假定 FAT 文件时间 （精度为两秒）。|
|/dst|补偿的一个小时 DST 时间差异。|
|/xjd|排除目录的交接点。|
|/xjf|排除文件的交接的点。|

### <a name="retry-options"></a>重试选项

|Option|描述|
|------|-----------|
|/r:\<N >|指定失败的副本上的重试次数。 默认值*N*是 1000000 （100 万个重试）。|
|/w:\<N >|指定重试，以秒为单位之间的等待时间。 默认值*N*为的 30 （等待时间为 30 秒）。|
|/reg|中指定的值保存 **/r**并 **/w**和注册表中的默认设置的选项。|
|/tbd|指定系统将等待要定义的共享名称 （重试错误 67）。|

### <a name="logging-options"></a>日志记录选项

|Option|描述|
|------|-----------|
|/l|指定要仅列出文件 （和不复制删除，或加盖时间戳）。|
|/x|报告所有额外的文件，而不仅仅是那些已选中。|
|/v|生成详细输出，并会显示所有已跳过的文件。|
|/ts|在输出中包括源文件时间戳。|
|/fp|在输出中包括的文件的完整路径名称。|
|/bytes|打印大小，为字节。|
|/ns|指定文件大小不以登录。|
|/nc|指定不会记录文件类。|
|/nfl|指定文件的名称不以登录。|
|/ndl|指定目录名称不以登录。|
|/np|指定将不会显示复制操作 （文件或目录复制到目前为止的数字） 的进度。|
|/eta|显示复制的文件 (ETA) 到达的估计的时间。|
|/log:\<日志文件 >|将状态输出写入到日志文件 （将覆盖现有的日志文件）。|
|/log+:\<LogFile>|将状态输出写入到日志文件 （将输出追加到现有日志文件）。|
|/unicode|以 Unicode 文本形式显示的状态输出。|
|/unilog:\<日志文件 >|将写入到日志文件输出为 Unicode 文本 （将覆盖现有的日志文件） 的状态。|
|/unilog+:\<LogFile>|将写入到日志文件输出为 Unicode 文本 （将输出追加到现有日志文件） 的状态。|
|/tee|将状态输出写入到控制台窗口中，以及日志文件。|
|/njh|指定是没有作业标头。|
|/njs|指定是没有作业摘要。|

### <a name="job-options"></a>作业选项

|Option|描述|
|------|-----------|
|/job:\<JobName>|指定参数要派生自命名的作业文件。|
|/ 保存：\<JobName >|指定参数保存到名为的作业文件。|
|/quit|处理命令行 （若要查看参数） 之后，将退出。|
|/nosd|指示未指定任何源目录。|
|/nodd|指示未指定任何目标目录。|
|/if|包含指定的文件。|

### <a name="exit-return-codes"></a>（返回） 的退出代码
值 | Description
-- | --
0 | 没有复制文件。 不遇到任何错误。  不匹配任何文件。 文件已存在于目标目录中;因此，复制操作已跳过。
1 | 已成功复制的所有文件。
2 | 有目标目录中的某些其他文件的源目录中不存在。 没有复制文件。
3 | 某些文件已复制。 其他文件不存在。 不遇到任何错误。
5 | 某些文件已复制。 某些文件已不匹配。 不遇到任何错误。
6 | 其他文件和不匹配的文件存在。 没有复制文件并不遇到任何问题。 这意味着文件已存在目标目录中。
7 | 已复制文件、 文件不匹配已存在，和其他文件不存在。
8 | 多个文件未能复制。

> [!NOTE]
> 任何大于 8 的值指示在复制操作期间出现至少一个错误。

### <a name="remarks"></a>备注

-   **/Mir**选项等同于 **/e**加上 **/清除**与行为一个略有不同的选项：  
    -   与 **/e**加上 **/清除**选项，如果目标目录存在，目标目录的安全设置不被覆盖。
    -   与 **/mir**选项时，如果目标目录存在，都会覆盖目标目录的安全设置。

#### <a name="additional-references"></a>其他参考

[命令行语法项](command-line-syntax-key.md)
