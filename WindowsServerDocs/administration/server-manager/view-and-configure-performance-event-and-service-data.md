---
title: 查看和配置性能事件和服务数据
description: 服务器管理器
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-server-manager
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: ccd59c35-4dbf-48e7-88a4-c519c00184d1
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 727b81d1ba2cda32a7568e4e2f23065b1589e745
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/17/2019
ms.locfileid: "59861898"
---
# <a name="view-and-configure-performance-event-and-service-data"></a>查看和配置性能、事件和服务数据

>适用于：Windows 服务器 （半年频道），Windows Server 2016 中，Windows Server 2012 R2、 Windows Server 2012

本主题介绍如何查看和配置事件日志条目、 性能计数器和服务的本地和远程服务器在服务器管理器中显示的警报。  

事件、 服务和性能日志数据显示在 Windows Server 中的服务器管理器控制台中的两个位置。  

-   在仪表板中，单击**事件**，**性能**，并**Services**缩略图配置事件、 性能和服务日志数据，你想要查看的行角色、 整个服务器管理器服务器池、 用户创建的服务器，组和本地服务器。 单击超文本行可打开**详细信息视图**对话框，让你指定想要在仪表板中发出警报的数据。 配置事件、 服务和你想要在仪表板缩略图中突出显示的性能日志数据后，具有指定的条件匹配的日志项将列在底部**详细信息视图**对话框。  

-   “事件”、“服务”和“性能”图块是角色和组主页的组成部分。 这些图块的“任务”菜单上的命令让你可以指定要从托管服务器收集的数据。 这些磁贴包含筛选器和查询，如果需要，可以进一步限制磁贴中显示的日志条目。  

本主题包含以下部分。  

-   [什么是缩略图？](#BKMK_thumb)  

-   [查看和配置事件](#BKMK_events)  

-   [查看和配置性能计数器](#BKMK_perf)  

-   [管理服务和配置服务警报](#BKMK_services)  

-   [查看和复制事件或性能条目](#BKMK_copy)  

## <a name="BKMK_thumb"></a>什么是缩略图？  
*缩略图*为每个角色 （角色缩略图反映收集的有关运行角色中的服务器管理器池的服务器的所有数据），在服务器管理器仪表板上显示每个服务器组，为**所有服务器**组 （所有在服务器管理器池中的服务器），而是针对本地服务器。 服务器管理器从托管服务器获取数据后，会在服务器池中的服务器运行的角色自动创建缩略图。  

如果服务器管理器控制台正在客户端计算机上作为远程服务器管理工具的一部分，则没有**本地服务器**缩略图。  

缩略图可让你快速查看角色、服务器和服务器组的状态和可管理性。 缩略图标题行将更改颜色 （和突出显示的数字将显示在左边距） 事件、 性能计数器、 最佳做法分析器结果、 服务或常规可管理性问题时满足条件的配置中**详细信息视图**通过单击缩略图行打开的对话框。 下表描述了缩略图中显示的数据。  

|缩略图行|描述|  
|---------|--------|  
|可管理性|服务器的可管理性包括几个度量值： 服务器是否联机或脱机，它是否可访问和报告数据到服务器管理器中，是否登录到本地计算机的用户具有足够的用户权限来访问或管理远程服务器、 远程服务器是否正在运行的所有远程管理所需的软件，或是否允许其进行查询和管理使用服务器管理器的方式配置服务器。 服务器管理器可以从运行 Windows Server 2003 的服务器收集的唯一可管理性数据是在服务器是联机还是脱机。 有关可管理性状态错误以及如何解决这些错误的详细信息，请参阅 [服务器管理器故障排除指南](https://social.technet.microsoft.com/wiki/contents/articles/13443.windows-server-2012-server-manager-troubleshooting-guide-part-i-overview.aspx)。|  
|事件|你可以将缩略图的“事件”  行配置为在所记录的事件与你指定的严重性级别、源、时间段、服务器或事件 ID 相匹配时显示警报。 查看事件，有关详细信息和更改的警报，你想要通过单击查看**事件**行并打开**事件详细信息视图**角色或服务器组对话框。|  
|Services|你可以配置**Services**行匹配启动类型、 服务状态、 服务名称和你在中指定的服务器角色或服务器组中找到的服务时显示警报**服务详细信息视图**对话框。<br /><br />一台服务器添加到服务器管理器服务器池后，如果没有用户登录到托管的服务器，可以显示关于 Shell 硬件检测服务的服务警报。 它的发生是由于 Shell 硬件检测服务只在用户登录到托管的服务器上，或连接到托管服务器的“远程桌面”会话才运行。 为了避免在这种情况下看到 Shell 硬件检测服务警报，请单击服务器组缩略图中的 **“服务”**，包括 **“所有服务器”** 组中的。 在**服务详细信息视图**对话框中，在**服务**下拉列表中，清除该复选框的**Shell 硬件检测**，然后单击**确定**.|  
|性能|你可以配置**性能**行相匹配的资源类型、 服务器或在指定的时间段发生的性能警报时显示角色或服务器组的警报**性能详细信息视图**对话框。<br /><br />性能计数器是默认关闭的。 托管的服务器运行的操作系统比 Windows Server 2003 和哪些性能计数器尚未启动，通常显示可管理性状态错误**联机-性能计数器未启动**在中**服务器**角色或组页的磁贴。 若要禁用性能计数器为托管服务器，启用**的所有服务器**页上，右键单击中的条目**性能**磁贴显示**计数器状态**值**关闭**，然后单击**启动性能计数器**。 您还可以通过右键单击服务器中的条目启动性能计数器**服务器**的角色或组页面，然后单击磁贴**启动性能计数器**。|  
|BPA 结果|你可以配置**BPA 结果**角色或服务器组中，当 BPA 扫描结果时找到匹配的严重级别、 服务器或 BPA 类型中指定的行以显示警报**BPA 结果详细信息视图**对话框。|  

## <a name="BKMK_events"></a>查看和配置事件  
在本部分中，了解如何配置从服务器管理器服务器池中的服务器收集的事件日志数据和要在缩略图中突出显示的事件。  

> [!NOTE]  
> 有关哪些提醒你在缩略图中的事件是指示服务器管理器从托管服务器收集的事件总数的子集。 尽管更改事件条件**配置事件数据**对话框中的**事件**磁贴可更改你在服务器管理器仪表板中看到更改事件警报条件的警报数缩略图有无影响从托管服务器收集的事件日志数据。  

#### <a name="to-configure-the-events-collected-from-managed-servers"></a>配置从托管服务器收集的事件的步骤  

1.  在服务器管理器控制台中，打开仪表板之外的任何页面。 你可以在角色、服务器组或本地服务器页面上的“事件”  图块中，配置要从托管服务器收集的事件。  

2.  在“事件”  图块的“任务”  菜单中，单击“配置事件数据” 。  

3.  选择你想要从所选组中的服务器收集的事件严重性级别。 默认情况下，选择“关键”、“错误”和“警告”严重性级别。  

4.  指定事件发生的时间段。 事件的默认时间段为 24 小时。  

5.  选择要从中要收集事件的事件日志文件。 默认值为“应用程序” 、“设置” 和“系统” 。  

6.  若要保存你所做的更改，请单击“确定”  ，以关闭“配置事件数据”  对话框。 保存你所做的更改后，事件数据将自动刷新。  

#### <a name="to-configure-the-events-highlighted-in-thumbnails"></a>配置在缩略图中突出显示的事件的步骤  

1.  如果服务器管理器已打开，请转到下一步。 如果服务器管理器尚未打开，请执行以下任一操作打开它。  

    -   在 Windows 桌面上，启动服务器管理器，方法是单击 Windows 任务栏中的“服务器管理器”。  

    -   在 Windows 的**开始**屏幕上，单击“服务器管理器”磁贴。  

2.  在仪表板页面上，在“角色和服务器组”  图块的缩略图中，单击“事件”  行。  

3.  在中**事件详细信息视图**对话框框中，添加到你想显示的事件的严重性级别。 默认情况下，缩略图仅显示突出显示关键事件的警报。 请注意，在显示的事件数**详细信息视图**添加想要收到警报的严重性级别时，对话框会增加。  

4.  在“事件来源”字段中，选择要向你发出警报的事件来源。 默认值是 **All**。  

5.  如果此缩略图是用于在多个服务器或一组多个服务器安装的角色，则可以选择所需事件警报中的服务器**服务器**下拉列表。  

6.  在中**时间段内**字段中，指定多达 1440年分钟、 24 小时或 1 天的时间段。  

7.  在“事件 ID”字段中，键入要向你发出警报的特定事件的事件 ID 号。 通过在要排除的事件 ID 或事件 ID 范围前键入连字符 (**-**)，可以键入按连字符分隔的事件 ID 范围以及范围中排除的事件 ID。 例如，值 **1,3,5-99,-76** 表示为事件 ID 1 和 3 以及 ID 在 5 和 99 之间但不包括事件 ID 76 的所有事件引发警报。  

8.  更改警报显示的条件，则显示在对话框底部结果窗格中的事件警报数可能会更改。 在列表中选择项并单击**隐藏警报**来防止影响来源缩略图中显示的警报计数。 按住 **Ctrl** 并选择警报，以一次选择多个警报。 你可以对匹配事件警报条件但无须查看的警报如此做。  

9. 单击“全部显示”  以将隐藏的警报返回给列表。  

10. 单击**确定**以保存所做的更改，关闭**详细信息视图**对话框中，并在来源缩略图中查看事件警报更改。  

## <a name="BKMK_perf"></a>查看和配置性能日志数据  
在本部分中，了解如何配置从服务器管理器服务器池中的服务器收集的性能日志数据以及哪些性能计数器警报要在缩略图中突出显示。  

性能计数器是默认关闭的。 托管的服务器运行的操作系统比 Windows Server 2003 和哪些性能计数器尚未启动，通常显示可管理性状态错误**联机-性能计数器未启动**在中**服务器**角色或组页的磁贴。 若要禁用性能计数器为托管服务器，启用**的所有服务器**页上，右键单击中的条目**性能**磁贴显示**计数器状态**值**关闭**，然后单击**启动性能计数器**。 您还可以通过右键单击服务器中的条目启动性能计数器**服务器**的角色或组页面，然后单击磁贴**启动性能计数器**。  

> [!NOTE]  
> 在缩略图中查看的性能警报是指示服务器管理器从托管服务器收集的总性能计数器数据的子集。 尽管更改性能警报条件**配置性能警报**对话框中的**性能**磁贴可更改你更改在服务器管理器仪表板上看到的警报数在缩略图中的性能警报条件不起从托管服务器收集的性能日志数据。  
>   
> 因此，你可以在缩略图中显示的性能数据的最长时间不能大于在“配置性能警报”  对话框中配置的最大图形显示时间。 例如，如果**图形显示时间**中的值**配置性能警报**是**1 天**的最大值**时间段内**字段中**性能详细信息视图**可以是您已经从服务器管理器仪表板打开的对话框**1 天**， **24 小时**，或**1,440 分钟**。  

#### <a name="to-configure-the-performance-log-data-collected-from-managed-servers"></a>配置从托管服务器收集的性能日志数据的步骤  

1.  在服务器管理器控制台中，打开仪表板之外的任何页面。 你可以在角色、服务器组或本地服务器页面上的“性能”图块中，配置要从托管服务器收集的性能数据。  

2.  若要从托管服务器收集性能日志数据，必须打开性能计数器。 如果关闭性能计数器，请右键单击中的条目**性能**磁贴列表中，，然后单击**启动性能计数器**。 性能计数器数据收集可能需要一些时间，具体取决于要从其中收集数据的服务器数和可用网络带宽。 在“计数器状态”  列中查看状态。  

3.  在“性能”  图块的“任务”  菜单中，单击“配置性能警报” 。  

4.  在所选的组，或者服务器正在运行所选的角色，指定要收集的服务器管理器性能计数器警报的 CPU 使用率的百分比。 默认为 85%。  

5.  请指定在收集性能计数器警报之前服务器必须具有的剩余可用内存（以 MB 计）。 默认值为 2 MB。  

6.  在选定页面的“性能”  图块中指定以图形方式针对资源“CPU 使用率”  和“可用内存”  显示的时间段。 默认时间段为一天。 单击“保存” 。  

    请注意，在单击“保存”  后，可更改“性能” 图块中的性能警报数以及图形显示的随时间推移的警报映射。  

    > [!NOTE]  
    > 具有的虚拟机[动态内存](https://technet.microsoft.com/library/ff817651.aspx)开启，不断增高的性能警报阈值可能会导致误报的警报。  

7.  若要刷新从服务器收集的性能警报列表，请在“任务”菜单上单击“刷新”。  

#### <a name="to-configure-the-performance-alerts-highlighted-in-thumbnails"></a>配置在缩略图中突出显示的性能警报的步骤  

1.  在仪表板页面上，在“角色和服务器组”  图块的缩略图中，单击“性能”  行。  

2.  在中**性能详细信息视图**对话框中，选择或清除你想要收到警报中的资源性能阈值的复选框**资源类型**字段。 请注意，在显示的性能警报数**详细信息视图**添加想要收到警报的资源性能阈值时，可以增加对话框。  

3.  如果此缩略图是用于在多个服务器或一组多个服务器安装的角色，则可以选择所需性能警报中的服务器**服务器**下拉列表。  

4.  在中**时间段内**字段中，指定多达 1440年分钟、 24 小时或 1 天的时间段。  

5.  更改警报显示的条件，则显示在对话框底部结果窗格中的警报数可能会更改。 单击“隐藏警报”  以隐藏比当前时间早的所有警报，并防止影响来源缩略图中显示的警报计数。  

6.  单击“全部显示”  以将隐藏的警报返回给列表。  

7.  单击**确定**以保存所做的更改，关闭**详细信息视图**对话框中，并在来源缩略图中查看性能警报更改。  

#### <a name="to-view-the-properties-of-performance-alerts"></a>查看性能警报属性的步骤  

1.  请执行以下操作之一。  

    -   在仪表板页面上，在“角色和服务器组”  图块的缩略图中，单击“性能”  行。  

    -   打开角色或组主页，并找到角色或组的“性能”图块。  

2.  双击列表中的某个性能警报以查看其属性。 或者，可以右键单击性能警报，再单击“查看属性”。  

3.  在“性能警报属性”对话框中，选择日志项以在“进程”区域中查看与该项关联的进程相关信息。  

4.  查看完性能警报属性后，关闭该对话框。  

### <a name="analyze-performance-data-and-solve-problems"></a>分析性能数据并解决问题  
有关分析在服务器管理器，并解决性能问题，在托管服务器上的查看的性能计数器数据的详细信息，请参阅以下资源。  

-   [分析性能数据](https://go.microsoft.com/fwlink/?LinkId=239829)  

-   [解决性能问题](https://go.microsoft.com/fwlink/?LinkId=239831)  

有关详细了解高级性能监视和分析工具可用于 Windows Server 2012 和更高版本的 Windows Server，包括服务器性能审查程序 3.0，请参阅[性能](https://msdn.microsoft.com/windows/hardware/gg463374.aspx)MSDN 上。  

## <a name="BKMK_services"></a>管理服务和配置服务警报  
在本部分中，了解如何启动、 停止、 重新启动、 暂停或恢复中显示的服务**Services**角色和服务器组页面在服务器管理器上的磁贴。 此外可以在服务器管理器仪表板上的缩略图中配置要发出的服务。  

> [!NOTE]  
> 不能更改服务、 服务依赖项、 恢复选项，或在服务器管理器的服务磁贴中的其他服务属性的启动类型。 若要更改服务状态之外的服务属性，请打开“服务”管理单元。 若要打开的快捷方式**Services**管理单元中位于**工具**菜单在服务器管理器。  

#### <a name="to-start-stop-restart-pause-or-resume-a-service"></a>启动、停止、重新启动、暂停或恢复服务的步骤  

1.  在服务器管理器控制台中，打开仪表板 （即，任何角色或组主页） 之外的任何页面。  

2.  在角色或组的“服务”  图块中，右键单击某个服务。  

3.  在上下文菜单中，单击要对服务执行的操作。 如果服务处于停止状态，则唯一可以执行的操作是启动服务。 同样地，如果服务处于暂停状态，则唯一可以执行的操作是恢复服务。  

4.  请注意，启动、停止、重新启动、暂停或恢复服务时，服务的“状态”  列值将在“服务”  图块中更改。  

#### <a name="to-configure-service-alerts-highlighted-in-thumbnails"></a>配置在缩略图中突出显示的服务警报的步骤  

1.  在仪表板页面上，在“角色和服务器组”图块的缩略图中，单击“服务”行。  

2.  在中**服务详细信息视图**对话框中，选择想要收到警报的服务的启动类型。 默认情况下**自动 （延迟启动）** 并**自动**选择。  

3.  选择想要收到警报的服务状态。 默认情况下，选择“全部”  。  

4.  选择想要收到警报的服务。 默认情况下，选择“全部”  。  

5.  选择与你想要接收服务警报的组的角色相关联的服务器。 默认情况下，选择“全部”  。  

6.  更改警报显示的条件，则显示在对话框底部结果窗格中的警报数可能会更改。 单击“隐藏警报”  以隐藏比当前时间早的所有警报，并防止影响来源缩略图中显示的警报计数。  

7.  单击“全部显示”  以将隐藏的警报返回给列表。  

8.  单击**确定**以保存所做的更改，关闭**详细信息视图**对话框中，并在来源缩略图中查看服务警报更改。  

## <a name="BKMK_copy"></a>查看和复制事件、 服务或性能条目  
您可以在这种复制事件、 服务或性能项属性**详细信息视图**对话框和**事件**并**性能**角色或组的磁贴。 右键单击事件或性能项，然后依次**复制**。  

“事件”  图块还让你可以预览图块底部的事件属性，方法是在列表中选择事件。 若要复制预览中显示的属性，右键单击预览窗格，然后单击**复制**。  

## <a name="see-also"></a>请参阅  
[服务器管理器](server-manager.md)  
[筛选器、 排序和查询服务器管理器磁贴中的数据](filter-sort-and-query-data-in-server-manager-tiles.md)  
