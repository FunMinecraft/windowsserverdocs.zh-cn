---
ms.assetid: d1953097-63ea-4a0e-b860-2f3b7c175c41
title: Windows 时间服务的工作原理
description: ''
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: networking
ms.openlocfilehash: c9ab52229c2a16d6ae6b0b2733c52e53a25cfa44
ms.sourcegitcommit: fb4e2ace2e0a29e0f6b028f1cb945cab6aa6ee2c
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/05/2018
---
# <a name="how-the-windows-time-service-works"></a>Windows 时间服务的工作原理

>适用于：Windows Server 2016，Windows Server 2012 R2、Windows Server 2012

**在此部分中**  
  
-   [Windows 时间服务建筑](#w2k3tr_times_how_rrfo)  
  
-   [Windows 时间服务时间协议](#w2k3tr_times_how_ekoc)  
  
-   [Windows 时间服务进程和交互](#w2k3tr_times_how_izcr)  
  
-   [使用 Windows 时服务的网络端口](#w2k3tr_times_how_ydum)  
  
> [!NOTE]  
> 本主题介绍仅 Windows 时间服务 (W32Time) 的工作方式。 有关如何配置 Windows 时间服务的信息，请参阅列表中的部分中的主题[在哪里找到 Windows 时服务配置信息](https://technet.microsoft.com/library/cc773061.aspx)。  
  
> [!NOTE]  
> 在 Windows Server 2003，Microsoft Windows 2000 Server 目录服务名为 Active Directory 目录服务。 在 Windows Server 2008 和更高版本，目录服务名为 Active Directory 域服务 (广告 DS)。 本主题中的其余部分指广告 DS，但也适用于 Active Directory 的信息。  
  
尽管 Windows 时间服务并不完全实现的网络时协议 (NTP)，它将使用复杂的算法套件中 NTP 规格以确保尽可能准确整个网络的计算机上时钟定义。 理想的情况下，广告 DS 域中的所有计算机时钟是与权威的计算机的时间进行都同步。 许多因素可能会影响时间网络上的同步。 以下因素通常影响的准确性同步广告 DS 中：  
  
-   网络条件  
  
-   时钟准确性的计算机的硬件  
  
-   CPU 和网络资源适用于 Windows 的时间服务量  
  
> [!IMPORTANT]  
> Windows Server 2016 中之前, W32Time 服务并非设计以满足时间敏感型应用程序需要。  但是，对 Windows Server 2016 更新现在允许你实施的 1ms 解决方案域中的准确性。  请参阅[Windows 2016 精确的时间](accurate-time.md)和[配置 Windows 时间为高准确性环境服务的支持边界](https://go.microsoft.com/fwlink/?LinkID=179459)详细信息。  
  
配置，使其更少的时间同步经常或未加入域的计算机，默认情况下，若要与 time.windows.com 同步。因此，很可能保证的时间有间歇性计算机或不连接网络上的准确性。  
  
广告 DS 森林具有预定的时间同步分层。 Windows 时间服务的时间内层次，在顶部的最准确参考时钟与计算机之间同步。 如果多个时间源配置计算机上，Windows 时间使用 NTP 算法选择根据计算机的能够与该时间源同步配置来源的最佳时间来源。 Windows 时间服务不支持网络广播或等多路广播从的同步。 有关这些 NTP 功能的详细信息，请参阅 RFC 1305 IETF RFC 数据库中。  
  
每台计算机运行的 Windows 时间服务都使用该服务维护最精确的时间。 计算机属于某个域中的成员作为默认的时间客户端，因此，在大多数情况下它不需要配置 Windows 时间服务。 但是，Windows 时间服务可配置来源指定的参考时间，请求的时间，并且还提供给客户的时间。
  
层次称为计算机的时间的准确程度。 （例如硬件时钟） 网络上的最准确的时间源占据最低层次级别或层次之一。 参考时钟称为该源精确的时间。 获取直接从参考时钟其时间 NTP 服务器占据一级高于参考时钟层次。 获得时间从 NTP 服务器的资源两个步骤离开参考时钟，因此占用是两个层次高于的最准确的时间源，依此类推。 为计算机层次数字越大，其系统时钟可能不太准确。 因此的任何计算机层次级别是预示着与最精确的时间源保持同步该计算机的程度。  
  
当 W32Time 管理器收到时间样本时，它使用特殊的算法中 NTP 以确定它时间示例是最适合使用。 时间服务还使用另一组算法的支持，以确定该设置的时间来源是最准确。 当时间服务检测到的时间示例是最佳时，它基于上述条件，调整本地时钟速率允许后才聚合朝正确的时间。 如果本地时钟和所选精确的时间示例 （也称为时间扭曲） 的时间区别太大，无法通过调整本地时钟率更正，时间服务将设置本地时钟到正确的时间。 时钟率或直接时钟时间更改此调整被称为时钟准则。  
  
## <a name="w2k3tr_times_how_rrfo"></a>Windows 时间服务建筑  
Windows 时间服务包含以下组件：  
  
-   服务控制管理器  
  
-   Windows 时间服务管理器  
  
-   时钟专业  
  
-   时间提供程序  
  
下图显示的体系结构 Windows 时间服务。  
  
**Windows 时间服务建筑**  
  
![Windows 时间](media/How-the-Windows-Time-Service-Works/trnt_sec_arcc.gif)  
  
服务控制管理器负责启动和停止 Windows 时间服务。 Windows 时间服务管理器负责启动附带操作系统 NTP 时间提供商的操作。 Windows 时间服务管理器来控制 Windows 时间服务的所有功能和合并所有时间样本。 除了提供有关当前系统状态，如当前时间源或最后时间系统时钟已更新信息，Windows 时间服务管理器程序还负责创建事件日志中的事件。  
  
时间同步进程中涉及以下步骤：  
  
-   输入提供商要求，接收来自配置 NTP 时间来源时间样本。  
  
-   这些时间示例将传递到 Windows 时服务管理器，它将收集所有样本，并将其传输到时钟专业子组件。  
  
-   时钟专业子组件适用 NTP 算法这会导致的最佳时间示例所选内容旁。  
  
-   时钟专业子组件调整通过调整时钟率或直接更改的时间的最准确的时间到系统时钟的时间。  
  
如果计算机已指定时间服务器为，它可以发送到请求时间同步此过程中任何位置的任何计算机的时间。  
  
## <a name="w2k3tr_times_how_ekoc"></a>Windows 时间服务时间协议  

时间协议确定程度两台计算机的时钟同步。 时间协议负责确定的最佳可用时间信息和汇聚时钟，以确保在不同的系统中确保保持一致的时间。  
  
Windows 时间服务使用的网络时协议 (NTP) 来通过网络同步时间。 NTP 是包含不必同步时钟专业算法 Internet 时间协议。 NTP 是更精确的时间协议比简单网络时间协议 (SNTP)，可在某些版本的 Windows。但是 W32Time 继续支持 SNTP 启用与计算机运行 SNTP 基于时间的服务，如 Windows 2000 的后向兼容性。  
  
### <a name="network-time-protocol"></a>网络时间协议  
网络时协议 (NTP) 是默认的时间使用 Windows 时间服务操作系统中的同步协议。 NTP 是能力故障、 高度可扩展时间协议，并且在使用最常使用指定的时间参考同步计算机时钟的协议。  
  
NTP 时间同步发生一段时间内通过，并且涉及 NTP 数据包传输通过网络。 NTP 数据包包含在时间同步中包含的客户端和服务器参与时间示例的时间戳。  
  
NTP 依赖于参考时钟定义最精确的时间要使用，并同步到该参考时钟网络上的所有时钟。 NTP 当前时间协调世界时 (UTC) 使用通用标准。 UTC 独立时区的时间，并使 NTP 在无论时区的区域设置世界随时随地使用。  
  
#### <a name="ntp-algorithms"></a>NTP 算法的支持  
NTP 包括两个算法、 时钟筛选算法和时钟选择算法，帮助确定的最佳时间示例 Windows 时间服务。 时钟筛选算法旨在筛选的时间和示例，将收到了来自查询的时间源确定每个来源的最佳时间示例。 时钟选择算法然后确定网络上的最准确的时间服务器。 此信息然后传递时钟专业算法，使用时，由于网络延迟和计算机时钟不准确性错误补偿更正的计算机，本地时钟中收集的信息。  
  
NTP 算法是最准确的灯到中等网络和服务器加载的情况下。 与会考虑网络公交时间任何算法，NTP 算法的支持，可能很好地运行 extreme 网络拥堵的情况下。 有关 NTP 算法的详细信息，请参阅 RFC 1305 IETF RFC 数据库中。  
  
#### <a name="ntp-time-provider"></a>NTP 时间提供程序  
Windows 时间服务，可支持的各种硬件设备和时间协议一个完整的时间同步包。 若要启用此支持，该服务使用可插入时间提供商。 时间提供程序是负责任一获取精确的时间戳 （从网络或硬件） 或通过网络提供的其他计算机这些时间戳。  
  
NTP 提供程序附带操作系统标准时间提供商。 NTP 提供商遵循 NTP 版本 3 的客户端和服务器，由指定的标准，并可与 SNTP 客户端和服务器 Windows 2000 和其他 SNTP 客户端的后向兼容性的交互。 在 Windows 时间服务 NTP 提供商由以下两部分组成：  
  
-   **NtpServer 输出提供商。** 这是响应网络上的客户端时间请求时间服务器。  
  
-   **NtpClient 输入提供商。** 这是从硬件设备或 NTP 服务器的其他来源获取时间的信息，并可以返回同步本地时钟有用的时间示例的时间客户端。  
  
尽管这些两个提供商的实际操作密切相关，它们将显示独立到时间服务。 从 Windows 2000 Server、 Windows 计算机连接到网络时，它被配置为 NTP 客户端。 此外，计算机运行的 Windows 时间 service 仅尝试同步域控制器或手动指定的时长源默认的时间。 以下是时间的首选的时间提供商，因为它们是时间的可用自动、 安全来源。  
  
#### <a name="ntp-security"></a>NTP 安全  

内的广告 DS 森林 Windows 时间服务依靠标准域实施的时间数据身份验证的安全功能。 NTP 数据包域成员计算机和充当时间服务器本地域控制器之间发送安全基于共享密钥身份验证。 Windows 时间服务使用计算机的 Kerberos 会话键上通过网络发送的 NTP 数据包创建经过身份验证的签名。 不内网络登录安全通道传输 NTP 数据包。 而是在计算机域控制器域层次中从请求时，Windows 时间服务要求时间进行身份验证。 域控制器然后返回与网络登录服务的会话密钥身份验证的 64 位值表单中的所需的信息。 如果返回的 NTP 数据包使用计算机的会话密钥未签名或已签名错误，将被拒绝时间。 此类所有身份验证失败在事件日志记录。 在这种方式，Windows 时间服务提供 NTP 广告 DS 森林中的数据的安全。  
  
一般情况下，Windows 时间客户端从自动获取精确的时间进行同步域控制器在同一的域。 林中，域控制器孩子域的同步与该域控制器其家长的域中的时间。 当时间服务器身份验证的 NTP 数据包返回到请求的时间客户端时，数据包进行了签名通过 Kerberos 会话密钥定义不受信任的内部域帐户。 新的广告 DS 域加入森林，并网络登录服务管理会话键时创建信任内部域帐户。 这种方式，域控制器在森林根域配置为可靠成为经过身份验证的时间源的家长和孩子域中的域控制器的所有和间接域树中的所有计算机。  
  
可以配置 Windows 时间服务林，之间工作，但请务必注意，此配置并不安全。 例如，NTP 服务器可能在不同的树林中可用。 但是，因为该计算机其他树林中，将可以登录并验证 NTP 数据包没有 Kerberos 会话键。 为了获得不同森林中的计算机上同步精确的时间，的客户端需要对该计算机的网络访问权限，必须配置时间服务使用位于其他森林中的特定时间源。 如果客户端手动配置为访问时间从 NTP 服务器自己的域层之外，客户端和服务器的时间之间发送 NTP 数据包未进行身份验证，，因此不安全。 即使使用林信任的实现，Windows 时间服务并不安全跨森林。 虽然网络登录安全通道 Windows 时间服务的身份验证机制，身份验证森林在不支持。  
  
#### <a name="hardware-devices-that-are-supported-by-the-windows-time-service"></a>受 Windows 时间服务的硬件设备  
将时钟硬件基于如 GPS 或电台时钟通常用作精准参考时钟设备。 默认情况下，Windows 时间服务 NTP 时间提供商不支持直接连接到计算机的硬件设备，，虽然就可以创建一个基于软件独立时间提供程序的支持这种连接类型。 这种类型的提供商，结合 Windows 时间服务，可提供可靠、 稳定时间参考。  
  
硬件设备，如 cesium 时钟或全球定位系统 (GPS) 接收器，提供按照以获取时间准确清晰度标准准确的当前时间。 Cesium 时钟极稳定和不受温度、 压力或湿度，如因素的影响，但也非常高。 GPS 接收器更便宜运行，并且还准确参考时钟。 GPS 接收器获得从从 cesium 时钟获得时间的卫星时间。 不提供商的名字独立次使用时，Windows 时间服务器可以获取通过连接到外部的 NTP 服务器，通过电话或 Internet 连接到硬件设备的时间。 如美国海军观测组织提供的连接到参考非常可靠时钟 NTP 服务器。  
  
许多 GPS 接收器和其他时间设备可以作为 NTP 网络上的服务器。 您可以配置广告 DS 林以也作为 NTP 网络上的服务器时，才同步来自以下硬件外部设备的时间。 若要执行此操作，将配置充当主域控制器 (PDC) 的模拟器，在你林根与提供 GPS 设备 NTP 服务器同步域控制器。 若要执行此操作，请参阅[PDC 模拟器森林根域中上配置 Windows 时间服务](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc731191%28v=ws.10%29)。  
  
### <a name="simple-network-time-protocol"></a>简单网络时协议  
简单的网络时协议 (SNTP) 是精确度的适用于服务器和不需要 NTP 提供的客户端简化的时间协议。 SNTP，NTP，更加基本版本是 Windows 2000 中使用的时间主要协议。 因为 SNTP 和 NTP 的网络数据包格式相同，两种协议进行互操作。 两者之间的主要区别在于 SNTP 没有错误管理和复杂 NTP 提供的筛选系统。 简单的网络时协议的详细信息，请参阅 RFC 1769 IETF RFC 数据库中。  
  
### <a name="time-protocol-interoperability"></a>时间协议互操作性  
因为 Windows 2000 可用 SNTP 协议与在 Windows XP 和 Windows Server 2003 NTP 协议互操作，可以混合的计算机运行的 Windows 2000、 Windows XP 和 Windows Server 2003 环境中运行 Windows 时间服务。  
  
在 Windows NT 服务器 4.0，称为 TimeServ，时间服务跨 Windows NT 4.0 网络同步时间。 TimeServ 是可以作为加载项功能的一部分*Microsoft Windows NT 4.0 资源工具包*并不提供程度时间同步所需的 Windows Server 2003 的可靠性。  
  
Windows 时间服务可与运行 Windows NT 4.0，因为它们可以与运行 Windows 2000 或 Windows Server 2003; 计算机同步时间的计算机兼容但是的计算机运行的 Windows 2000 或 Windows Server 2003 未自动检测 Windows NT 4.0 时间服务器。 例如，如果你的域配置为使用层次基于域同步时间付款方式同步，并且你想要域层次进行同步时，使用 Windows NT 4.0 域控制器中的计算机，你需要将这些计算机手动同步使用 Windows NT 4.0 域控制器配置。  
  
Windows NT 4.0 使用更易于使用机制时间比 Windows 时间服务使用的同步。 因此，以确保在你的网络精确的时间同步，建议你对 Windows 2000 或 Windows Server 2003 升级任何 Windows NT 4.0 域控制器。  
  
## <a name="w2k3tr_times_how_izcr"></a>Windows 时间服务进程和交互  

Windows 时间服务旨在同步网络上计算机的时钟。 网络时同步进程，也称为时间融合为每个计算机访问时间发生整个网络的更精确的时间服务器。 时间融合涉及的进程权威服务器提供给客户端计算机以以下形式出现： NTP 数据包当前时间。 数据包中提供的信息指示是否需要这样就与更准确服务器同步到计算机的当前时钟时间进行了调整。  
  
作为时融合过程的一部分，域成员尝试同步的任何位于同一的域的域控制器的时间。 如果计算机域控制器，它将尝试与更权威的域控制器同步。  
  
运行 Windows XP Home Edition 或未加入域的计算机的计算机不尝试与域层次同步，但配置默认情况下，以获取从 time.windows.com 时间。  
  
若要建立运行 Windows Server 2003 为权威的计算机，必须将计算机配置为可靠的时间源。 默认情况下，安装在 Windows Server 2003 域第一个域控制器自动配置为时间可靠的源。 是域权威的计算机，因为它必须配置外部时间源而不是与域层次同步。 此外默认情况下，其他 Windows Server 2003 域成员配置为与域层次同步。  
  
建立 Windows Server 2003 网络后，您可以配置 Windows 时间服务同步使用下列选项之一：  
  
-   域分层基于同步  
  
-   手动指定同步源  
  
-   所有可用的同步机制  
  
-   未同步。  
  
每个同步的类型是以下部分中所述的。  
  
### <a name="domain-hierarchy-based-synchronization"></a>域分层基于同步  

同步基于域层次使用广告 DS 域优先级来查找要与之同步时间可靠的源。 根据层次域，Windows 时间服务确定每次服务器的准确性。 在 Windows Server 2003 树林中，计算机上拥有主域控制器 (PDC) 仿真器操作主角色，位于森林根域中，保存的位置的最佳时间源，除非另一个可靠的时间源已配置。 下图说明时间同步计算机在域层次之间的路径。  
  
**广告 DS 层次中时间同步**  
  
![Windows 时间](media/How-the-Windows-Time-Service-Works/trnt_ntw_adhc.gif)  
  
#### <a name="reliable-time-source-configuration"></a>时间可靠的源配置  
配置为时间可靠的源的计算机被标识为时间服务根。 根时间服务的是域权威服务器，通常配置为检索外部 NTP 服务器或硬件设备的时间。 作为可靠的时间源优化域层次整个传输时间的方式，可以配置时间服务器。 如果域控制器配置为时间可靠的源，网络登录服务将在该域控制器其登录到该网络时宣布为时间可靠的源。 其他域控制器查找时间源与进行同步，当他们所选择可靠的源首先如果可用。  
  
#### <a name="time-source-selection"></a>时间源所选内容  
时间源的选择过程可以创建在网络上的两个问题：  
  
-   其他同步周期。  
  
-   在网络通信提高的音量。  
  
发生一次在同步网络时时间保持一致之间的一组域控制器同时共享它们不与其他可靠的时间源重新同步持续之间。 Windows 时间服务时间源选择算法设计防御这些类型的问题。  
  
一台计算机使用以下方法之一来标识时间源与同步：  
  
-   如果计算机不属于某个域，它必须配置为与指定的时长源同步。  
  
-   计算机是否成员服务器或工作站在某个域，默认情况下，它将遵循广告 DS 层次并且与当前运行的 Windows 时间服务其本地域中的域控制器同步它的时间。  
  
如果计算机域控制器，它使达六个查询以查找其他域控制器与进行同步。 每个查询旨在确定时间源某些属性，如一种类型的域控制器，某个特定的位置，以及它是否已可靠的时间源。 时间源必须还遵守以下限制：  
  
-   只能与父域中的域控制器同步可靠的时间源。  
  
-   具有可靠的时间源其自己的域中或家长域中的任何域控制器，PDC 模拟器可以同步。  
  
如果不能与它查询的域控制器类型同步域控制器，查询无法进行。 域控制器知道哪种类型的计算机它使查询之前，可以从的时间。 例如，一个本地 PDC 仿真器不会尝试为查询数字三或六因为域控制器不会尝试与自身同步。  
  
下表列出了域控制器使查找时间源和顺序进行查询查询。  
  
**域控制器时间源查询**  
  
|查询号码|域控制器|位置|时间源的可靠性|  
|----------------|---------------------|------------|------------------------------|  
|1|家长域控制器|站点在|喜欢可靠的源时间，但它可以与非可靠的时间源同步如果这是所有可用。|  
|2|本地域控制器|站点在|具有可靠的时间源仅同步。|  
|3|本地 PDC 仿真器|站点在|不适用于。<br /><br />域控制器不会尝试与自身同步。|  
|4|家长域控制器|出控件的网站|喜欢可靠的源时间，但它可以与非可靠的时间源同步如果这是所有可用。|  
|5|本地域控制器|出控件的网站|具有可靠的时间源仅同步。|  
|6|本地 PDC 仿真器|出控件的网站|不适用于。<br /><br />域控制器不会尝试与自身同步。|  
  
**注意**  
  
-   一台计算机永远不会与本身同步。 如果尝试同步的计算机本地 PDC 模拟器，它不会尝试查询 3 平板电脑或 6。  
  
每个查询返回用作时间源的域控制器的列表。 Windows 时间分配是每个域控制器查询分数基于可靠性和域控制器的位置。 下表列出了 Windows 时间为每种类型的域控制器由分配得分。  
  
**分数确定**  
  
|域控制器状态|分数|  
|----------------------------|---------|  
|位于同一站点域控制器|8|  
|标记为时间可靠的源的域控制器|4|  
|位于家长域域控制器|2|  
|是 PDC 仿真器的域控制器|1|  
  
当 Windows 时间服务确定时，它有可能的最佳分数发现域控制器时，不进行任何更多查询。 分数时间服务分配是累积的这意味着位于同一站点 PDC 模拟器接收九个分数。  
  
如果时间服务根未配置为与外部的源同步，该计算机的硬件内部时钟对本时间。  
  
### <a name="manually-specified-synchronization"></a>手动指定同步  
手动指定同步可以让你指定的单个对方或对从计算机中获取时间等的列表。 如果计算机不属于某个域，必须手动将其配置为与指定的时长源同步。 计算机的是域中的成员配置默认情况下，若要从域层次同步，最有用的域的森林根或的未加入域的计算机是手动指定的同步。 手动指定外部 NTP 服务器来与您的域权威的计算机同步提供可靠的时间。 但是，配置为可与硬件时钟同步你域权威的计算机是实际上提供给你的域的最准确、 安全时间更好的解决方案。  
  
除非在特定时间提供商编写对他们来说，因此是易受攻击者，不身份验证手动指定时间来源。 此外，如果计算机同步手动指定的源代码，而不是其身份验证的域控制器，两台计算机可能利用同步时，导致 Kerberos 身份验证失败。 这可能导致要求网络身份验证失败，打印或共享文件等的其他操作。 如果只森林根配置为与外部的源同步，森林中的其他计算机保持同步相互，进行重播攻击困难。  
  
### <a name="all-available-synchronization-mechanisms"></a>所有可用的同步机制  

"在所有可用的同步机制"选项是网络上的用户最有价值同步方法。 此方法使与域层次同步，并且还可能会提供一种替代时间源如果域层次变为不可用，具体取决于配置。 如果无法与域层次同步时间客户端，将时间源自动回退到指定的时间源**NtpServer**设置。 同步此方法是最有可能提供给客户端精确的时间。  

### <a name="stopping-time-synchronization"></a>停止同步的时间  
有某些情况的下，你将需要停止同步时间的计算机。 例如，如果的计算机尝试通过拨号连接同步 WAN 通过从 Internet 上的时间源或其他网站，它可能会产生高电话费用。 禁用该计算机上的同步，当你尝试访问时间源通过拨号连接阻止计算机。  
  
你还可以禁用同步以防止代事件日志中的错误。 每次尝试与不可用，时间源同步的计算机它事件日志中生成一个错误。 如果不打算重新配置的客户端从其他来源同步时间源拍摄计划维护网络注销，您可以禁用用于阻止时间服务器不可用时，请尝试同步的客户端上同步。  
  
它可禁用指在同步网络根在计算机上的同步。 这表示根计算机信任其本地时钟。 如果同步层次根未设置为**非同步**和客户端无法与另一次源同步时，如果不接受这台计算机发送出，因为它的时间不能为受信任的数据包中。  
  
仅时间，即使他们未同步的其他时间源的客户端信任服务器那些客户端标识为服务器可靠的时间。  
  
### <a name="disabling-the-windows-time-service"></a>禁用 Windows 时间服务  
Windows 时间服务 (W32Time) 可以完全禁用。 如果你选择要实现的第三方时间同步产品使用 NTP，必须先禁用 Windows 时间服务。 这是因为所有 NTP 服务器都需要访问用户数据报协议 (UDP) 端口 123，并且只要在 Windows Server 2003 操作系统上运行的 Windows 时间服务，端口 123 保持保留通过 Windows 时间。  
  
## <a name="w2k3tr_times_how_ydum"></a>使用 Windows 时服务的网络端口  
Windows 时间服务通信网络标识可靠的时间来源、 获取时间信息和时间信息提供给其他计算机上。 它将由 NTP 和 SNTP Rfc 定义执行此通信。  
  
**端口 Windows 时间服务的分配**  
  
|服务名称|UDP|TCP|  
|----------------|-------|-------|  
|NTP|123|不适用|  
|SNTP|123|不适用|  
  
## <a name="see-also"></a>请参阅  
[Windows 时间服务技术参考](https://technet.microsoft.com/library/cc773061.aspx)  
[Windows 时服务工具和设置](Windows-Time-Service-Tools-and-Settings.md)  
[Microsoft 知识库文章 902229](https://go.microsoft.com/fwlink/?LinkId=186066)  
  


